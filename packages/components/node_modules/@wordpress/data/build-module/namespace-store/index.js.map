{"version":3,"sources":["@wordpress/data/src/namespace-store/index.js"],"names":["createStore","applyMiddleware","flowRight","get","mapValues","combineReducers","createReduxRoutineMiddleware","promise","createResolversCacheMiddleware","metadataReducer","metadataSelectors","metadataActions","createNamespace","key","options","registry","reducer","store","createReduxStore","resolvers","actions","mapActions","selectors","mapSelectors","selector","state","args","metadata","isRegistrySelector","root","result","mapResolvers","getSelectors","getActions","__unstableOriginalGetState","getState","subscribe","listener","lastState","hasChanged","middlewares","controls","normalizedControls","control","isRegistryControl","push","enhancers","window","__REDUX_DEVTOOLS_EXTENSION__","name","instanceId","initialState","enhancedReducer","createStateSelector","registrySelector","runSelector","argsLength","arguments","length","Array","i","hasResolver","createBoundAction","action","Promise","resolve","dispatch","mappedResolvers","resolver","fulfill","resolverFulfill","mapSelector","selectorName","selectorResolver","fulfillSelector","isFulfilled","hasStartedResolution","startResolution","fulfillResolver","finishResolution"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { createStore, applyMiddleware } from 'redux';\nimport { flowRight, get, mapValues } from 'lodash';\nimport combineReducers from 'turbo-combine-reducers';\n\n/**\n * WordPress dependencies\n */\nimport createReduxRoutineMiddleware from '@wordpress/redux-routine';\n\n/**\n * Internal dependencies\n */\nimport promise from '../promise-middleware';\nimport createResolversCacheMiddleware from '../resolvers-cache-middleware';\nimport metadataReducer from './metadata/reducer';\nimport * as metadataSelectors from './metadata/selectors';\nimport * as metadataActions from './metadata/actions';\n\n/**\n * @typedef {WPDataRegistry} WPDataRegistry\n */\n\n/**\n * Creates a namespace object with a store derived from the reducer given.\n *\n * @param {string}         key      Unique namespace identifier.\n * @param {Object}         options  Registered store options, with properties\n *                                  describing reducer, actions, selectors, and\n *                                  resolvers.\n * @param {WPDataRegistry} registry Registry reference.\n *\n * @return {Object} Store Object.\n */\nexport default function createNamespace( key, options, registry ) {\n\tconst reducer = options.reducer;\n\tconst store = createReduxStore( key, options, registry );\n\n\tlet resolvers;\n\tconst actions = mapActions(\n\t\t{\n\t\t\t...metadataActions,\n\t\t\t...options.actions,\n\t\t},\n\t\tstore\n\t);\n\tlet selectors = mapSelectors(\n\t\t{\n\t\t\t...mapValues(\n\t\t\t\tmetadataSelectors,\n\t\t\t\t( selector ) => ( state, ...args ) =>\n\t\t\t\t\tselector( state.metadata, ...args )\n\t\t\t),\n\t\t\t...mapValues( options.selectors, ( selector ) => {\n\t\t\t\tif ( selector.isRegistrySelector ) {\n\t\t\t\t\tselector.registry = registry;\n\t\t\t\t}\n\n\t\t\t\treturn ( state, ...args ) => selector( state.root, ...args );\n\t\t\t} ),\n\t\t},\n\t\tstore\n\t);\n\tif ( options.resolvers ) {\n\t\tconst result = mapResolvers( options.resolvers, selectors, store );\n\t\tresolvers = result.resolvers;\n\t\tselectors = result.selectors;\n\t}\n\n\tconst getSelectors = () => selectors;\n\tconst getActions = () => actions;\n\n\t// We have some modules monkey-patching the store object\n\t// It's wrong to do so but until we refactor all of our effects to controls\n\t// We need to keep the same \"store\" instance here.\n\tstore.__unstableOriginalGetState = store.getState;\n\tstore.getState = () => store.__unstableOriginalGetState().root;\n\n\t// Customize subscribe behavior to call listeners only on effective change,\n\t// not on every dispatch.\n\tconst subscribe =\n\t\tstore &&\n\t\t( ( listener ) => {\n\t\t\tlet lastState = store.__unstableOriginalGetState();\n\t\t\tstore.subscribe( () => {\n\t\t\t\tconst state = store.__unstableOriginalGetState();\n\t\t\t\tconst hasChanged = state !== lastState;\n\t\t\t\tlastState = state;\n\n\t\t\t\tif ( hasChanged ) {\n\t\t\t\t\tlistener();\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\n\t// This can be simplified to just { subscribe, getSelectors, getActions }\n\t// Once we remove the use function.\n\treturn {\n\t\treducer,\n\t\tstore,\n\t\tactions,\n\t\tselectors,\n\t\tresolvers,\n\t\tgetSelectors,\n\t\tgetActions,\n\t\tsubscribe,\n\t};\n}\n\n/**\n * Creates a redux store for a namespace.\n *\n * @param {string}         key      Unique namespace identifier.\n * @param {Object}         options  Registered store options, with properties\n *                                  describing reducer, actions, selectors, and\n *                                  resolvers.\n * @param {WPDataRegistry} registry Registry reference.\n *\n * @return {Object} Newly created redux store.\n */\nfunction createReduxStore( key, options, registry ) {\n\tconst middlewares = [\n\t\tcreateResolversCacheMiddleware( registry, key ),\n\t\tpromise,\n\t];\n\n\tif ( options.controls ) {\n\t\tconst normalizedControls = mapValues( options.controls, ( control ) => {\n\t\t\treturn control.isRegistryControl ? control( registry ) : control;\n\t\t} );\n\t\tmiddlewares.push( createReduxRoutineMiddleware( normalizedControls ) );\n\t}\n\n\tconst enhancers = [ applyMiddleware( ...middlewares ) ];\n\tif (\n\t\ttypeof window !== 'undefined' &&\n\t\twindow.__REDUX_DEVTOOLS_EXTENSION__\n\t) {\n\t\tenhancers.push(\n\t\t\twindow.__REDUX_DEVTOOLS_EXTENSION__( {\n\t\t\t\tname: key,\n\t\t\t\tinstanceId: key,\n\t\t\t} )\n\t\t);\n\t}\n\n\tconst { reducer, initialState } = options;\n\tconst enhancedReducer = combineReducers( {\n\t\tmetadata: metadataReducer,\n\t\troot: reducer,\n\t} );\n\n\treturn createStore(\n\t\tenhancedReducer,\n\t\t{ root: initialState },\n\t\tflowRight( enhancers )\n\t);\n}\n\n/**\n * Maps selectors to a store.\n *\n * @param {Object} selectors Selectors to register. Keys will be used as the\n *                           public facing API. Selectors will get passed the\n *                           state as first argument.\n * @param {Object} store     The store to which the selectors should be mapped.\n *\n * @return {Object} Selectors mapped to the provided store.\n */\nfunction mapSelectors( selectors, store ) {\n\tconst createStateSelector = ( registrySelector ) => {\n\t\tconst selector = function runSelector() {\n\t\t\t// This function is an optimized implementation of:\n\t\t\t//\n\t\t\t//   selector( store.getState(), ...arguments )\n\t\t\t//\n\t\t\t// Where the above would incur an `Array#concat` in its application,\n\t\t\t// the logic here instead efficiently constructs an arguments array via\n\t\t\t// direct assignment.\n\t\t\tconst argsLength = arguments.length;\n\t\t\tconst args = new Array( argsLength + 1 );\n\t\t\targs[ 0 ] = store.__unstableOriginalGetState();\n\t\t\tfor ( let i = 0; i < argsLength; i++ ) {\n\t\t\t\targs[ i + 1 ] = arguments[ i ];\n\t\t\t}\n\n\t\t\treturn registrySelector( ...args );\n\t\t};\n\t\tselector.hasResolver = false;\n\t\treturn selector;\n\t};\n\n\treturn mapValues( selectors, createStateSelector );\n}\n\n/**\n * Maps actions to dispatch from a given store.\n *\n * @param {Object} actions    Actions to register.\n * @param {Object} store      The redux store to which the actions should be mapped.\n * @return {Object}           Actions mapped to the redux store provided.\n */\nfunction mapActions( actions, store ) {\n\tconst createBoundAction = ( action ) => ( ...args ) => {\n\t\treturn Promise.resolve( store.dispatch( action( ...args ) ) );\n\t};\n\n\treturn mapValues( actions, createBoundAction );\n}\n\n/**\n * Returns resolvers with matched selectors for a given namespace.\n * Resolvers are side effects invoked once per argument set of a given selector call,\n * used in ensuring that the data needs for the selector are satisfied.\n *\n * @param {Object} resolvers   Resolvers to register.\n * @param {Object} selectors   The current selectors to be modified.\n * @param {Object} store       The redux store to which the resolvers should be mapped.\n * @return {Object}            An object containing updated selectors and resolvers.\n */\nfunction mapResolvers( resolvers, selectors, store ) {\n\tconst mappedResolvers = mapValues( resolvers, ( resolver ) => {\n\t\tconst { fulfill: resolverFulfill = resolver } = resolver;\n\t\treturn { ...resolver, fulfill: resolverFulfill };\n\t} );\n\n\tconst mapSelector = ( selector, selectorName ) => {\n\t\tconst resolver = resolvers[ selectorName ];\n\t\tif ( ! resolver ) {\n\t\t\tselector.hasResolver = false;\n\t\t\treturn selector;\n\t\t}\n\n\t\tconst selectorResolver = ( ...args ) => {\n\t\t\tasync function fulfillSelector() {\n\t\t\t\tconst state = store.getState();\n\t\t\t\tif (\n\t\t\t\t\ttypeof resolver.isFulfilled === 'function' &&\n\t\t\t\t\tresolver.isFulfilled( state, ...args )\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst { metadata } = store.__unstableOriginalGetState();\n\t\t\t\tif (\n\t\t\t\t\tmetadataSelectors.hasStartedResolution(\n\t\t\t\t\t\tmetadata,\n\t\t\t\t\t\tselectorName,\n\t\t\t\t\t\targs\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tmetadataActions.startResolution( selectorName, args )\n\t\t\t\t);\n\t\t\t\tawait fulfillResolver(\n\t\t\t\t\tstore,\n\t\t\t\t\tmappedResolvers,\n\t\t\t\t\tselectorName,\n\t\t\t\t\t...args\n\t\t\t\t);\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tmetadataActions.finishResolution( selectorName, args )\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tfulfillSelector( ...args );\n\t\t\treturn selector( ...args );\n\t\t};\n\t\tselectorResolver.hasResolver = true;\n\t\treturn selectorResolver;\n\t};\n\n\treturn {\n\t\tresolvers: mappedResolvers,\n\t\tselectors: mapValues( selectors, mapSelector ),\n\t};\n}\n\n/**\n * Calls a resolver given arguments\n *\n * @param {Object} store        Store reference, for fulfilling via resolvers\n * @param {Object} resolvers    Store Resolvers\n * @param {string} selectorName Selector name to fulfill.\n * @param {Array} args          Selector Arguments.\n */\nasync function fulfillResolver( store, resolvers, selectorName, ...args ) {\n\tconst resolver = get( resolvers, [ selectorName ] );\n\tif ( ! resolver ) {\n\t\treturn;\n\t}\n\n\tconst action = resolver.fulfill( ...args );\n\tif ( action ) {\n\t\tawait store.dispatch( action );\n\t}\n}\n"]}