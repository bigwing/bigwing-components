{"version":3,"sources":["@wordpress/components/src/dropdown-menu/index.native.js"],"names":["mergeProps","defaultProps","props","mergedProps","className","DropdownMenu","children","controls","icon","label","popoverProps","toggleProps","menuLabel","position","alternative","plugin","controlSets","Array","isArray","mergedPopoverProps","isOpen","onToggle","openOnArrowDown","event","keyCode","DOWN","preventDefault","stopPropagation","mergedToggleProps","onClick","onKeyDown","onClose","paddingLeft","paddingRight","controlSet","indexOfSet","map","control","indexOfControl","join","title","isActive","Platform","OS"],"mappings":";;;;;;;;;;;;;;;;;AAGA;;AACA;;AACA;;AAIA;;AACA;;AACA;;AACA;;AAKA;;AACA;;;;;;AAEA,SAASA,UAAT,GAAqD;AAAA,MAAhCC,YAAgC,uEAAjB,EAAiB;AAAA,MAAbC,KAAa,uEAAL,EAAK;;AACpD,MAAMC,WAAW,qBACbF,YADa,MAEbC,KAFa,CAAjB;;AAKA,MAAKA,KAAK,CAACE,SAAN,IAAmBH,YAAY,CAACG,SAArC,EAAiD;AAChDD,IAAAA,WAAW,CAACC,SAAZ,GAAwB,yBACvBF,KAAK,CAACE,SADiB,EAEvBH,YAAY,CAACG,SAFU,CAAxB;AAIA;;AAED,SAAOD,WAAP;AACA;;AAED,SAASE,YAAT,OAWI;AAAA,MAVHC,QAUG,QAVHA,QAUG;AAAA,MATHF,SASG,QATHA,SASG;AAAA,MARHG,QAQG,QARHA,QAQG;AAAA,uBAPHC,IAOG;AAAA,MAPHA,IAOG,0BAPI,MAOJ;AAAA,MANHC,KAMG,QANHA,KAMG;AAAA,MALHC,YAKG,QALHA,YAKG;AAAA,MAJHC,WAIG,QAJHA,WAIG;AAAA,MAFHC,SAEG,QAFHA,SAEG;AAAA,MADHC,QACG,QADHA,QACG;;AACH,MAAKD,SAAL,EAAiB;AAChB,6BAAY,yCAAZ,EAAuD;AACtDE,MAAAA,WAAW,EAAE,kDADyC;AAEtDC,MAAAA,MAAM,EAAE;AAF8C,KAAvD;AAIA;;AAED,MAAKF,QAAL,EAAgB;AACf,6BAAY,wCAAZ,EAAsD;AACrDC,MAAAA,WAAW,EAAE,mDADwC;AAErDC,MAAAA,MAAM,EAAE;AAF6C,KAAtD;AAIA;;AAED,MAAK,qBAASR,QAAT,KAAuB,CAAE,wBAAYD,QAAZ,CAA9B,EAAuD;AACtD,WAAO,IAAP;AACA,GAjBE,CAmBH;;;AACA,MAAIU,WAAJ;;AACA,MAAK,CAAE,qBAAST,QAAT,CAAP,EAA6B;AAC5BS,IAAAA,WAAW,GAAGT,QAAd;;AACA,QAAK,CAAEU,KAAK,CAACC,OAAN,CAAeF,WAAW,CAAE,CAAF,CAA1B,CAAP,EAA2C;AAC1CA,MAAAA,WAAW,GAAG,CAAEA,WAAF,CAAd;AACA;AACD;;AACD,MAAMG,kBAAkB,GAAGnB,UAAU,CACpC;AACCI,IAAAA,SAAS,EAAE,mCADZ;AAECS,IAAAA,QAAQ,EAARA;AAFD,GADoC,EAKpCH,YALoC,CAArC;AAQA,SACC,4BAAC,iBAAD;AACC,IAAA,SAAS,EAAG,yBAAY,0BAAZ,EAAwCN,SAAxC,CADb;AAEC,IAAA,YAAY,EAAGe,kBAFhB;AAGC,IAAA,YAAY,EAAG,6BAA4B;AAAA,UAAxBC,MAAwB,SAAxBA,MAAwB;AAAA,UAAhBC,QAAgB,SAAhBA,QAAgB;;AAC1C,UAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAAEC,KAAF,EAAa;AACpC,YAAK,CAAEH,MAAF,IAAYG,KAAK,CAACC,OAAN,KAAkBC,cAAnC,EAA0C;AACzCF,UAAAA,KAAK,CAACG,cAAN;AACAH,UAAAA,KAAK,CAACI,eAAN;AACAN,UAAAA,QAAQ;AACR;AACD,OAND;;AAOA,UAAMO,iBAAiB,GAAG5B,UAAU,CACnC;AACCI,QAAAA,SAAS,EAAE,yBACV,kCADU,EAEV;AACC,uBAAagB;AADd,SAFU;AADZ,OADmC,EASnCT,WATmC,CAApC;AAYA,aACC,4BAAC,eAAD,6BACMiB,iBADN;AAEC,QAAA,IAAI,EAAGpB,IAFR;AAGC,QAAA,OAAO,EAAG,iBAAEe,KAAF,EAAa;AACtBF,UAAAA,QAAQ,CAAEE,KAAF,CAAR;;AACA,cAAKK,iBAAiB,CAACC,OAAvB,EAAiC;AAChCD,YAAAA,iBAAiB,CAACC,OAAlB,CAA2BN,KAA3B;AACA;AACD,SARF;AASC,QAAA,SAAS,EAAG,mBAAEA,KAAF,EAAa;AACxBD,UAAAA,eAAe,CAAEC,KAAF,CAAf;;AACA,cAAKK,iBAAiB,CAACE,SAAvB,EAAmC;AAClCF,YAAAA,iBAAiB,CAACE,SAAlB,CAA6BP,KAA7B;AACA;AACD,SAdF;AAeC,yBAAc,MAff;AAgBC,yBAAgBH,MAhBjB;AAiBC,QAAA,KAAK,EAAGX,KAjBT;AAkBC,QAAA,WAAW;AAlBZ,UAoBGmB,iBAAiB,CAACtB,QApBrB,CADD;AAwBA,KA/CF;AAgDC,IAAA,aAAa,EAAG,8BAAqC;AAAA,UAAjCc,MAAiC,SAAjCA,MAAiC;AAAA,UAAzBW,OAAyB,SAAzBA,OAAyB;AAAA,UAAb7B,KAAa;AACpD,aACC,4BAAC,uBAAD;AACC,QAAA,UAAU,EAAG,IADd;AAEC,QAAA,SAAS,EAAGkB,MAFb;AAGC,QAAA,OAAO,EAAGW;AAHX,SAKG,wBAAYzB,QAAZ,IAAyBA,QAAQ,CAAEJ,KAAF,CAAjC,GAA6C,IALhD,EAMC,4BAAC,qBAAD;AACC,QAAA,KAAK,EAAGO,KADT;AAEC,QAAA,KAAK,EAAG;AAAEuB,UAAAA,WAAW,EAAE,CAAf;AAAkBC,UAAAA,YAAY,EAAE;AAAhC;AAFT,SAIG,qBACDjB,WADC,EAED,UAAEkB,UAAF,EAAcC,UAAd;AAAA,eACCD,UAAU,CAACE,GAAX,CACC,UAAEC,OAAF,EAAWC,cAAX;AAAA,iBACC,4BAAC,uBAAD,CAAa,IAAb;AACC,YAAA,GAAG,EAAG,CACLH,UADK,EAELG,cAFK,EAGJC,IAHI,EADP;AAKC,YAAA,KAAK,EAAGF,OAAO,CAACG,KALjB;AAMC,YAAA,OAAO,EAAG,mBAAM;AACfT,cAAAA,OAAO;;AACP,kBAAKM,OAAO,CAACR,OAAb,EAAuB;AACtBQ,gBAAAA,OAAO,CAACR,OAAR;AACA;AACD,aAXF;AAYC,YAAA,QAAQ,EAAG,KAZZ;AAaC,YAAA,IAAI,EAAGQ,OAAO,CAAC7B,IAbhB;AAcC,YAAA,SAAS,EAAG,IAdb;AAeC,YAAA,UAAU,EAAG6B,OAAO,CAACI,QAftB;AAgBC,YAAA,aAAa,EACZC,sBAASC,EAAT,KAAgB,SAAhB,GACG,MADH,GAEG;AAnBL,YADD;AAAA,SADD,CADD;AAAA,OAFC,CAJH,CAND,CADD;AA4CA;AA7FF,IADD;AAiGA;;eAEc,uCAA0BtC,YAA1B,C","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { flatMap, isEmpty, isFunction } from 'lodash';\nimport { Platform } from 'react-native';\n/**\n * WordPress dependencies\n */\nimport { DOWN } from '@wordpress/keycodes';\nimport deprecated from '@wordpress/deprecated';\nimport { BottomSheet, PanelBody } from '@wordpress/components';\nimport { withPreferredColorScheme } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport Button from '../button';\nimport Dropdown from '../dropdown';\n\nfunction mergeProps( defaultProps = {}, props = {} ) {\n\tconst mergedProps = {\n\t\t...defaultProps,\n\t\t...props,\n\t};\n\n\tif ( props.className && defaultProps.className ) {\n\t\tmergedProps.className = classnames(\n\t\t\tprops.className,\n\t\t\tdefaultProps.className\n\t\t);\n\t}\n\n\treturn mergedProps;\n}\n\nfunction DropdownMenu( {\n\tchildren,\n\tclassName,\n\tcontrols,\n\ticon = 'menu',\n\tlabel,\n\tpopoverProps,\n\ttoggleProps,\n\t// The following props exist for backward compatibility.\n\tmenuLabel,\n\tposition,\n} ) {\n\tif ( menuLabel ) {\n\t\tdeprecated( '`menuLabel` prop in `DropdownComponent`', {\n\t\t\talternative: '`menuProps` object and its `aria-label` property',\n\t\t\tplugin: 'Gutenberg',\n\t\t} );\n\t}\n\n\tif ( position ) {\n\t\tdeprecated( '`position` prop in `DropdownComponent`', {\n\t\t\talternative: '`popoverProps` object and its `position` property',\n\t\t\tplugin: 'Gutenberg',\n\t\t} );\n\t}\n\n\tif ( isEmpty( controls ) && ! isFunction( children ) ) {\n\t\treturn null;\n\t}\n\n\t// Normalize controls to nested array of objects (sets of controls)\n\tlet controlSets;\n\tif ( ! isEmpty( controls ) ) {\n\t\tcontrolSets = controls;\n\t\tif ( ! Array.isArray( controlSets[ 0 ] ) ) {\n\t\t\tcontrolSets = [ controlSets ];\n\t\t}\n\t}\n\tconst mergedPopoverProps = mergeProps(\n\t\t{\n\t\t\tclassName: 'components-dropdown-menu__popover',\n\t\t\tposition,\n\t\t},\n\t\tpopoverProps\n\t);\n\n\treturn (\n\t\t<Dropdown\n\t\t\tclassName={ classnames( 'components-dropdown-menu', className ) }\n\t\t\tpopoverProps={ mergedPopoverProps }\n\t\t\trenderToggle={ ( { isOpen, onToggle } ) => {\n\t\t\t\tconst openOnArrowDown = ( event ) => {\n\t\t\t\t\tif ( ! isOpen && event.keyCode === DOWN ) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\tonToggle();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tconst mergedToggleProps = mergeProps(\n\t\t\t\t\t{\n\t\t\t\t\t\tclassName: classnames(\n\t\t\t\t\t\t\t'components-dropdown-menu__toggle',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'is-opened': isOpen,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t\ttoggleProps\n\t\t\t\t);\n\n\t\t\t\treturn (\n\t\t\t\t\t<Button\n\t\t\t\t\t\t{ ...mergedToggleProps }\n\t\t\t\t\t\ticon={ icon }\n\t\t\t\t\t\tonClick={ ( event ) => {\n\t\t\t\t\t\t\tonToggle( event );\n\t\t\t\t\t\t\tif ( mergedToggleProps.onClick ) {\n\t\t\t\t\t\t\t\tmergedToggleProps.onClick( event );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonKeyDown={ ( event ) => {\n\t\t\t\t\t\t\topenOnArrowDown( event );\n\t\t\t\t\t\t\tif ( mergedToggleProps.onKeyDown ) {\n\t\t\t\t\t\t\t\tmergedToggleProps.onKeyDown( event );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} }\n\t\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\t\taria-expanded={ isOpen }\n\t\t\t\t\t\tlabel={ label }\n\t\t\t\t\t\tshowTooltip\n\t\t\t\t\t>\n\t\t\t\t\t\t{ mergedToggleProps.children }\n\t\t\t\t\t</Button>\n\t\t\t\t);\n\t\t\t} }\n\t\t\trenderContent={ ( { isOpen, onClose, ...props } ) => {\n\t\t\t\treturn (\n\t\t\t\t\t<BottomSheet\n\t\t\t\t\t\thideHeader={ true }\n\t\t\t\t\t\tisVisible={ isOpen }\n\t\t\t\t\t\tonClose={ onClose }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ isFunction( children ) ? children( props ) : null }\n\t\t\t\t\t\t<PanelBody\n\t\t\t\t\t\t\ttitle={ label }\n\t\t\t\t\t\t\tstyle={ { paddingLeft: 0, paddingRight: 0 } }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ flatMap(\n\t\t\t\t\t\t\t\tcontrolSets,\n\t\t\t\t\t\t\t\t( controlSet, indexOfSet ) =>\n\t\t\t\t\t\t\t\t\tcontrolSet.map(\n\t\t\t\t\t\t\t\t\t\t( control, indexOfControl ) => (\n\t\t\t\t\t\t\t\t\t\t\t<BottomSheet.Cell\n\t\t\t\t\t\t\t\t\t\t\t\tkey={ [\n\t\t\t\t\t\t\t\t\t\t\t\t\tindexOfSet,\n\t\t\t\t\t\t\t\t\t\t\t\t\tindexOfControl,\n\t\t\t\t\t\t\t\t\t\t\t\t].join() }\n\t\t\t\t\t\t\t\t\t\t\t\tlabel={ control.title }\n\t\t\t\t\t\t\t\t\t\t\t\tonPress={ () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t\t\t\t\t\t\tif ( control.onClick ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontrol.onClick();\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t\t\t\teditable={ false }\n\t\t\t\t\t\t\t\t\t\t\t\ticon={ control.icon }\n\t\t\t\t\t\t\t\t\t\t\t\tleftAlign={ true }\n\t\t\t\t\t\t\t\t\t\t\t\tisSelected={ control.isActive }\n\t\t\t\t\t\t\t\t\t\t\t\tseparatorType={\n\t\t\t\t\t\t\t\t\t\t\t\t\tPlatform.OS === 'android'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'none'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'leftMargin'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</PanelBody>\n\t\t\t\t\t</BottomSheet>\n\t\t\t\t);\n\t\t\t} }\n\t\t/>\n\t);\n}\n\nexport default withPreferredColorScheme( DropdownMenu );\n"]}