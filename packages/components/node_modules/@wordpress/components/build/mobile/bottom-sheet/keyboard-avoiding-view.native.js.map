{"version":3,"sources":["@wordpress/components/src/mobile/bottom-sheet/keyboard-avoiding-view.native.js"],"names":["KeyboardAvoidingView","arguments","_onKeyboardChange","bind","_subscriptions","state","bottom","keyboardFrame","windowHeight","Dimensions","get","height","keyboardY","screenY","props","keyboardVerticalOffset","final","Math","max","event","setState","duration","easing","endCoordinates","_relativeKeyboardHeight","LayoutAnimation","configureNext","update","type","Types","Platform","OS","Keyboard","addListener","forEach","subscription","remove","children","enabled","style","finalStyle","bottomHeight","StyleSheet","compose","paddingBottom","React","Component","defaultProps"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA;;AACA;;;;;;AASA;;;;;;;IAOMA,oB;;;;;AACL,kCAAc;AAAA;;AAAA;AACb,+BAAUC,SAAV;AAEA,UAAKC,iBAAL,GAAyB,MAAKA,iBAAL,CAAuBC,IAAvB,6CAAzB;AACA,UAAKC,cAAL,GAAsB,EAAtB;AACA,UAAKC,KAAL,GAAa;AACZC,MAAAA,MAAM,EAAE;AADI,KAAb;AALa;AAQb;;;;4CAEwBC,a,EAAgB;AACxC,UAAK,CAAEA,aAAP,EAAuB;AACtB,eAAO,CAAP;AACA;;AAED,UAAMC,YAAY,GAAGC,wBAAWC,GAAX,CAAgB,QAAhB,EAA2BC,MAAhD;;AACA,UAAMC,SAAS,GACdL,aAAa,CAACM,OAAd,GAAwB,KAAKC,KAAL,CAAWC,sBADpC;AAGA,UAAMC,KAAK,GAAGC,IAAI,CAACC,GAAL,CAAUV,YAAY,GAAGI,SAAzB,EAAoC,CAApC,CAAd;AACA,aAAOI,KAAP;AACA;AAED;;;;;;sCAGmBG,K,EAAQ;AAC1B,UAAKA,KAAK,KAAK,IAAf,EAAsB;AACrB,aAAKC,QAAL,CAAe;AAAEd,UAAAA,MAAM,EAAE;AAAV,SAAf;AACA;AACA;;AAJyB,UAMlBe,QANkB,GAMmBF,KANnB,CAMlBE,QANkB;AAAA,UAMRC,MANQ,GAMmBH,KANnB,CAMRG,MANQ;AAAA,UAMAC,cANA,GAMmBJ,KANnB,CAMAI,cANA;;AAO1B,UAAMZ,MAAM,GAAG,KAAKa,uBAAL,CAA8BD,cAA9B,CAAf;;AAEA,UAAK,KAAKlB,KAAL,CAAWC,MAAX,KAAsBK,MAA3B,EAAoC;AACnC;AACA;;AAED,UAAKU,QAAQ,IAAIC,MAAjB,EAA0B;AACzBG,qCAAgBC,aAAhB,CAA+B;AAC9BL,UAAAA,QAAQ,EAARA,QAD8B;AAE9BM,UAAAA,MAAM,EAAE;AACPN,YAAAA,QAAQ,EAARA,QADO;AAEPO,YAAAA,IAAI,EAAEH,6BAAgBI,KAAhB,CAAuBP,MAAvB,KAAmC;AAFlC;AAFsB,SAA/B;AAOA;;AACD,WAAKF,QAAL,CAAe;AAAEd,QAAAA,MAAM,EAAEK;AAAV,OAAf;AACA;;;wCAEmB;AACnB,UAAKmB,sBAASC,EAAT,KAAgB,KAArB,EAA6B;AAC5B,aAAK3B,cAAL,GAAsB,CACrB4B,sBAASC,WAAT,CACC,yBADD,EAEC,KAAK/B,iBAFN,CADqB,CAAtB;AAMA;AACD;;;2CAEsB;AACtB,WAAKE,cAAL,CAAoB8B,OAApB,CAA6B,UAAEC,YAAF,EAAoB;AAChDA,QAAAA,YAAY,CAACC,MAAb;AACA,OAFD;AAGA;;;6BAEQ;AAAA,wBAOJ,KAAKtB,KAPD;AAAA,UAEPuB,QAFO,eAEPA,QAFO;AAAA,UAGPC,OAHO,eAGPA,OAHO;AAAA,UAIPvB,sBAJO,eAIPA,sBAJO;AAAA,UAKPwB,KALO,eAKPA,KALO;AAAA,UAMJzB,KANI;AASR,UAAI0B,UAAU,GAAGD,KAAjB;;AACA,UAAKT,sBAASC,EAAT,KAAgB,KAArB,EAA6B;AAC5B,YAAMU,YAAY,GAAGH,OAAO,GAAG,KAAKjC,KAAL,CAAWC,MAAd,GAAuB,CAAnD;AACAkC,QAAAA,UAAU,GAAGE,wBAAWC,OAAX,CAAoBJ,KAApB,EAA2B;AACvCK,UAAAA,aAAa,EAAEH;AADwB,SAA3B,CAAb;AAGA;;AAED,aACC,4BAAC,iBAAD;AAAM,QAAA,KAAK,EAAGD;AAAd,SAAgC1B,KAAhC,GACGuB,QADH,CADD;AAKA;;;EA3FiCQ,eAAMC,S;;AA8FzC9C,oBAAoB,CAAC+C,YAArB,GAAoC;AACnCT,EAAAA,OAAO,EAAE,IAD0B;AAEnCvB,EAAAA,sBAAsB,EAAE;AAFW,CAApC;eAKef,oB","sourcesContent":["/**\n * External dependencies\n */\nimport React from 'react';\nimport {\n\tKeyboard,\n\tLayoutAnimation,\n\tPlatform,\n\tStyleSheet,\n\tView,\n\tDimensions,\n} from 'react-native';\n\n/**\n * This is a simplified version of Facebook's KeyboardAvoidingView.\n * It's meant to work specifically with BottomSheets.\n * This fixes an issue in the bottom padding calculation, when the\n * BottomSheet was presented on Landscape, with the keyboard already present,\n * and a TextField on Autofocus (situation present on Links UI)\n */\nclass KeyboardAvoidingView extends React.Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis._onKeyboardChange = this._onKeyboardChange.bind( this );\n\t\tthis._subscriptions = [];\n\t\tthis.state = {\n\t\t\tbottom: 0,\n\t\t};\n\t}\n\n\t_relativeKeyboardHeight( keyboardFrame ) {\n\t\tif ( ! keyboardFrame ) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tconst windowHeight = Dimensions.get( 'window' ).height;\n\t\tconst keyboardY =\n\t\t\tkeyboardFrame.screenY - this.props.keyboardVerticalOffset;\n\n\t\tconst final = Math.max( windowHeight - keyboardY, 0 );\n\t\treturn final;\n\t}\n\n\t/**\n\t * @param {Object} event Keyboard event.\n\t */\n\t_onKeyboardChange( event ) {\n\t\tif ( event === null ) {\n\t\t\tthis.setState( { bottom: 0 } );\n\t\t\treturn;\n\t\t}\n\n\t\tconst { duration, easing, endCoordinates } = event;\n\t\tconst height = this._relativeKeyboardHeight( endCoordinates );\n\n\t\tif ( this.state.bottom === height ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( duration && easing ) {\n\t\t\tLayoutAnimation.configureNext( {\n\t\t\t\tduration,\n\t\t\t\tupdate: {\n\t\t\t\t\tduration,\n\t\t\t\t\ttype: LayoutAnimation.Types[ easing ] || 'keyboard',\n\t\t\t\t},\n\t\t\t} );\n\t\t}\n\t\tthis.setState( { bottom: height } );\n\t}\n\n\tcomponentDidMount() {\n\t\tif ( Platform.OS === 'ios' ) {\n\t\t\tthis._subscriptions = [\n\t\t\t\tKeyboard.addListener(\n\t\t\t\t\t'keyboardWillChangeFrame',\n\t\t\t\t\tthis._onKeyboardChange\n\t\t\t\t),\n\t\t\t];\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis._subscriptions.forEach( ( subscription ) => {\n\t\t\tsubscription.remove();\n\t\t} );\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tchildren,\n\t\t\tenabled,\n\t\t\tkeyboardVerticalOffset, // eslint-disable-line no-unused-vars\n\t\t\tstyle,\n\t\t\t...props\n\t\t} = this.props;\n\n\t\tlet finalStyle = style;\n\t\tif ( Platform.OS === 'ios' ) {\n\t\t\tconst bottomHeight = enabled ? this.state.bottom : 0;\n\t\t\tfinalStyle = StyleSheet.compose( style, {\n\t\t\t\tpaddingBottom: bottomHeight,\n\t\t\t} );\n\t\t}\n\n\t\treturn (\n\t\t\t<View style={ finalStyle } { ...props }>\n\t\t\t\t{ children }\n\t\t\t</View>\n\t\t);\n\t}\n}\n\nKeyboardAvoidingView.defaultProps = {\n\tenabled: true,\n\tkeyboardVerticalOffset: 0,\n};\n\nexport default KeyboardAvoidingView;\n"]}