{"version":3,"sources":["@wordpress/components/src/clipboard-button/index.js"],"names":["ClipboardButton","className","children","onCopy","onFinishCopy","text","buttonProps","ref","hasCopied","lastHasCopied","current","classes","focusOnCopyEventTarget","event","target","focus"],"mappings":";;;;;;;;;AAQA;;;;;;AALA;;AAMA;;AAKA;;AAdA;;;;AAKA;;;;AAMA;;;AAKe,SAASA,eAAT,OAOX;AAAA,MANHC,SAMG,QANHA,SAMG;AAAA,MALHC,QAKG,QALHA,QAKG;AAAA,MAJHC,MAIG,QAJHA,MAIG;AAAA,MAHHC,YAGG,QAHHA,YAGG;AAAA,MAFHC,IAEG,QAFHA,IAEG;AAAA,MADAC,WACA;AACH,MAAMC,GAAG,GAAG,sBAAZ;AACA,MAAMC,SAAS,GAAG,6BAAgBD,GAAhB,EAAqBF,IAArB,CAAlB;AACA,MAAMI,aAAa,GAAG,qBAAQD,SAAR,CAAtB;AAEA,0BAAW,YAAM;AAChB,QAAKC,aAAa,CAACC,OAAd,KAA0BF,SAA/B,EAA2C;AAC1C;AACA;;AAED,QAAKA,SAAL,EAAiB;AAChBL,MAAAA,MAAM;AACN,KAFD,MAEO,IAAKC,YAAL,EAAoB;AAC1BA,MAAAA,YAAY;AACZ;;AAEDK,IAAAA,aAAa,CAACC,OAAd,GAAwBF,SAAxB;AACA,GAZD,EAYG,CAAEL,MAAF,EAAUC,YAAV,EAAwBI,SAAxB,CAZH;AAcA,MAAMG,OAAO,GAAG,yBAAY,6BAAZ,EAA2CV,SAA3C,CAAhB,CAnBG,CAqBH;AACA;AACA;AACA;AACA;;AACA,MAAMW,sBAAsB,GAAG,SAAzBA,sBAAyB,CAAEC,KAAF,EAAa;AAC3CA,IAAAA,KAAK,CAACC,MAAN,CAAaC,KAAb;AACA,GAFD;;AAIA,SACC,4BAAC,eAAD,6BACMT,WADN;AAEC,IAAA,SAAS,EAAGK,OAFb;AAGC,IAAA,GAAG,EAAGJ,GAHP;AAIC,IAAA,MAAM,EAAGK;AAJV,MAMGV,QANH,CADD;AAUA","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useRef, useEffect } from '@wordpress/element';\nimport { useCopyOnClick } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport Button from '../button';\n\nexport default function ClipboardButton( {\n\tclassName,\n\tchildren,\n\tonCopy,\n\tonFinishCopy,\n\ttext,\n\t...buttonProps\n} ) {\n\tconst ref = useRef();\n\tconst hasCopied = useCopyOnClick( ref, text );\n\tconst lastHasCopied = useRef( hasCopied );\n\n\tuseEffect( () => {\n\t\tif ( lastHasCopied.current === hasCopied ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( hasCopied ) {\n\t\t\tonCopy();\n\t\t} else if ( onFinishCopy ) {\n\t\t\tonFinishCopy();\n\t\t}\n\n\t\tlastHasCopied.current = hasCopied;\n\t}, [ onCopy, onFinishCopy, hasCopied ] );\n\n\tconst classes = classnames( 'components-clipboard-button', className );\n\n\t// Workaround for inconsistent behavior in Safari, where <textarea> is not\n\t// the document.activeElement at the moment when the copy event fires.\n\t// This causes documentHasSelection() in the copy-handler component to\n\t// mistakenly override the ClipboardButton, and copy a serialized string\n\t// of the current block instead.\n\tconst focusOnCopyEventTarget = ( event ) => {\n\t\tevent.target.focus();\n\t};\n\n\treturn (\n\t\t<Button\n\t\t\t{ ...buttonProps }\n\t\t\tclassName={ classes }\n\t\t\tref={ ref }\n\t\t\tonCopy={ focusOnCopyEventTarget }\n\t\t>\n\t\t\t{ children }\n\t\t</Button>\n\t);\n}\n"]}