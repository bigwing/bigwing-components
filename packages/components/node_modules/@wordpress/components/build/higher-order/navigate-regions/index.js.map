{"version":3,"sources":["@wordpress/components/src/higher-order/navigate-regions/index.js"],"names":["defaultShortcuts","previous","rawShortcut","access","next","WrappedComponent","shortcuts","props","container","isFocusingRegions","setIsFocusingRegions","className","focusRegion","offset","regions","Array","from","current","querySelectorAll","length","nextRegion","selectedIndex","indexOf","document","activeElement","nextIndex","focus","focusPrevious","focusNext","bindGlobal"],"mappings":";;;;;;;;;AAQA;;;;;;AALA;;AAMA;;AAIA;;AAbA;;;;AAKA;;;AAUA,IAAMA,gBAAgB,GAAG;AACxBC,EAAAA,QAAQ,EAAE,CAAE,cAAF,EAAkBC,sBAAYC,MAAZ,CAAoB,GAApB,CAAlB,CADc;AAExBC,EAAAA,IAAI,EAAE,CAAE,QAAF,EAAYF,sBAAYC,MAAZ,CAAoB,GAApB,CAAZ;AAFkB,CAAzB;;eAKe,yCAA4B,UAAEE,gBAAF,EAAwB;AAClE,SAAO,gBAAkD;AAAA,8BAA9CC,SAA8C;AAAA,QAA9CA,SAA8C,+BAAlCN,gBAAkC;AAAA,QAAbO,KAAa;AACxD,QAAMC,SAAS,GAAG,sBAAlB;;AADwD,oBAEJ,uBAAU,KAAV,CAFI;AAAA;AAAA,QAEhDC,iBAFgD;AAAA,QAE7BC,oBAF6B;;AAGxD,QAAMC,SAAS,GAAG,yBAAY,6BAAZ,EAA2C;AAC5D,6BAAuBF;AADqC,KAA3C,CAAlB;;AAIA,aAASG,WAAT,CAAsBC,MAAtB,EAA+B;AAC9B,UAAMC,OAAO,GAAGC,KAAK,CAACC,IAAN,CACfR,SAAS,CAACS,OAAV,CAAkBC,gBAAlB,CAAoC,iBAApC,CADe,CAAhB;;AAGA,UAAK,CAAEJ,OAAO,CAACK,MAAf,EAAwB;AACvB;AACA;;AACD,UAAIC,UAAU,GAAGN,OAAO,CAAE,CAAF,CAAxB;AACA,UAAMO,aAAa,GAAGP,OAAO,CAACQ,OAAR,CAAiBC,QAAQ,CAACC,aAA1B,CAAtB;;AACA,UAAKH,aAAa,KAAK,CAAC,CAAxB,EAA4B;AAC3B,YAAII,SAAS,GAAGJ,aAAa,GAAGR,MAAhC;AACAY,QAAAA,SAAS,GAAGA,SAAS,KAAK,CAAC,CAAf,GAAmBX,OAAO,CAACK,MAAR,GAAiB,CAApC,GAAwCM,SAApD;AACAA,QAAAA,SAAS,GAAGA,SAAS,KAAKX,OAAO,CAACK,MAAtB,GAA+B,CAA/B,GAAmCM,SAA/C;AACAL,QAAAA,UAAU,GAAGN,OAAO,CAAEW,SAAF,CAApB;AACA;;AAEDL,MAAAA,UAAU,CAACM,KAAX;AACAhB,MAAAA,oBAAoB,CAAE,IAAF,CAApB;AACA;;AACD,QAAMiB,aAAa,GAAG,0BAAa;AAAA,aAAMf,WAAW,CAAE,CAAC,CAAH,CAAjB;AAAA,KAAb,EAAsC,CAC3DJ,SAD2D,CAAtC,CAAtB;AAGA,QAAMoB,SAAS,GAAG,0BAAa;AAAA,aAAMhB,WAAW,CAAE,CAAF,CAAjB;AAAA,KAAb,EAAqC,CAAEJ,SAAF,CAArC,CAAlB;AAEA,sCAAqBF,SAAS,CAACL,QAA/B,EAAyC0B,aAAzC,EAAwD;AACvDE,MAAAA,UAAU,EAAE;AAD2C,KAAxD;AAGA,sCAAqBvB,SAAS,CAACF,IAA/B,EAAqCwB,SAArC,EAAgD;AAAEC,MAAAA,UAAU,EAAE;AAAd,KAAhD,EAlCwD,CAoCxD;;AACA;;AACA,WACC;AACC,MAAA,GAAG,EAAGrB,SADP;AAEC,MAAA,SAAS,EAAGG,SAFb;AAGC,MAAA,OAAO,EAAG;AAAA,eAAMD,oBAAoB,CAAE,KAAF,CAA1B;AAAA;AAHX,OAKC,4BAAC,gBAAD,EAAuBH,KAAvB,CALD,CADD;AASA;AACA,GAhDD;AAiDA,CAlDc,EAkDZ,iBAlDY,C","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useCallback, useState, useRef } from '@wordpress/element';\nimport {\n\tcreateHigherOrderComponent,\n\tuseKeyboardShortcut,\n} from '@wordpress/compose';\nimport { rawShortcut } from '@wordpress/keycodes';\n\nconst defaultShortcuts = {\n\tprevious: [ 'ctrl+shift+`', rawShortcut.access( 'p' ) ],\n\tnext: [ 'ctrl+`', rawShortcut.access( 'n' ) ],\n};\n\nexport default createHigherOrderComponent( ( WrappedComponent ) => {\n\treturn ( { shortcuts = defaultShortcuts, ...props } ) => {\n\t\tconst container = useRef();\n\t\tconst [ isFocusingRegions, setIsFocusingRegions ] = useState( false );\n\t\tconst className = classnames( 'components-navigate-regions', {\n\t\t\t'is-focusing-regions': isFocusingRegions,\n\t\t} );\n\n\t\tfunction focusRegion( offset ) {\n\t\t\tconst regions = Array.from(\n\t\t\t\tcontainer.current.querySelectorAll( '[role=\"region\"]' )\n\t\t\t);\n\t\t\tif ( ! regions.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet nextRegion = regions[ 0 ];\n\t\t\tconst selectedIndex = regions.indexOf( document.activeElement );\n\t\t\tif ( selectedIndex !== -1 ) {\n\t\t\t\tlet nextIndex = selectedIndex + offset;\n\t\t\t\tnextIndex = nextIndex === -1 ? regions.length - 1 : nextIndex;\n\t\t\t\tnextIndex = nextIndex === regions.length ? 0 : nextIndex;\n\t\t\t\tnextRegion = regions[ nextIndex ];\n\t\t\t}\n\n\t\t\tnextRegion.focus();\n\t\t\tsetIsFocusingRegions( true );\n\t\t}\n\t\tconst focusPrevious = useCallback( () => focusRegion( -1 ), [\n\t\t\tcontainer,\n\t\t] );\n\t\tconst focusNext = useCallback( () => focusRegion( 1 ), [ container ] );\n\n\t\tuseKeyboardShortcut( shortcuts.previous, focusPrevious, {\n\t\t\tbindGlobal: true,\n\t\t} );\n\t\tuseKeyboardShortcut( shortcuts.next, focusNext, { bindGlobal: true } );\n\n\t\t// Disable reason: Clicking the editor should dismiss the regions focus style\n\t\t/* eslint-disable jsx-a11y/no-static-element-interactions, jsx-a11y/click-events-have-key-events */\n\t\treturn (\n\t\t\t<div\n\t\t\t\tref={ container }\n\t\t\t\tclassName={ className }\n\t\t\t\tonClick={ () => setIsFocusingRegions( false ) }\n\t\t\t>\n\t\t\t\t<WrappedComponent { ...props } />\n\t\t\t</div>\n\t\t);\n\t\t/* eslint-enable jsx-a11y/no-static-element-interactions, jsx-a11y/click-events-have-key-events */\n\t};\n}, 'navigateRegions' );\n"]}