{"version":3,"sources":["@wordpress/components/src/focal-point-picker/index.js"],"names":["TEXTCONTROL_MIN","TEXTCONTROL_MAX","FocalPointPicker","props","onMouseMove","bind","state","isDragging","bounds","percentages","value","containerRef","imageRef","horizontalPositionChanged","verticalPositionChanged","onLoad","prevProps","url","setState","top","left","bottom","right","width","height","current","dimensions","clientWidth","clientHeight","pickerDimensions","widthRatio","heightRatio","calculateBounds","event","onChange","cursorPosition","pageX","pageY","Math","max","min","x","toFixed","y","fraction","round","positionChangeFromTextControl","target","axis","cleanValue","parseInt","getBoundingClientRect","document","body","scrollTop","instanceId","label","help","className","iconCoordinates","iconContainerStyle","iconContainerClasses","id","horizontalPositionId","verticalPositionId","fractionToPercentage","Component","defaultProps","withInstanceId","withFocusOutside"],"mappings":";;;;;;;;;AASA;;;;;;;;;;;;;;AANA;;AAKA;;AAEA;;AACA;;AAKA;;AACA;;;;;;AAEA,IAAMA,eAAe,GAAG,CAAxB;AACA,IAAMC,eAAe,GAAG,GAAxB;;IAEaC,gB;;;;;AACZ,4BAAaC,KAAb,EAAqB;AAAA;;AAAA;AACpB,8BAAOA,KAAP;AACA,UAAKC,WAAL,GAAmB,MAAKA,WAAL,CAAiBC,IAAjB,6CAAnB;AACA,UAAKC,KAAL,GAAa;AACZC,MAAAA,UAAU,EAAE,KADA;AAEZC,MAAAA,MAAM,EAAE,EAFI;AAGZC,MAAAA,WAAW,EAAEN,KAAK,CAACO;AAHP,KAAb;AAKA,UAAKC,YAAL,GAAoB,yBAApB;AACA,UAAKC,QAAL,GAAgB,yBAAhB;AACA,UAAKC,yBAAL,GAAiC,MAAKA,yBAAL,CAA+BR,IAA/B,6CAAjC;AAGA,UAAKS,uBAAL,GAA+B,MAAKA,uBAAL,CAA6BT,IAA7B,6CAA/B;AAGA,UAAKU,MAAL,GAAc,MAAKA,MAAL,CAAYV,IAAZ,6CAAd;AAhBoB;AAiBpB;;;;uCACmBW,S,EAAY;AAC/B,UAAKA,SAAS,CAACC,GAAV,KAAkB,KAAKd,KAAL,CAAWc,GAAlC,EAAwC;AACvC,aAAKC,QAAL,CAAe;AACdX,UAAAA,UAAU,EAAE;AADE,SAAf;AAGA;AACD;;;sCACiB;AACjB,UAAMC,MAAM,GAAG;AACdW,QAAAA,GAAG,EAAE,CADS;AAEdC,QAAAA,IAAI,EAAE,CAFQ;AAGdC,QAAAA,MAAM,EAAE,CAHM;AAIdC,QAAAA,KAAK,EAAE,CAJO;AAKdC,QAAAA,KAAK,EAAE,CALO;AAMdC,QAAAA,MAAM,EAAE;AANM,OAAf;;AAQA,UAAK,CAAE,KAAKZ,QAAL,CAAca,OAArB,EAA+B;AAC9B,eAAOjB,MAAP;AACA;;AACD,UAAMkB,UAAU,GAAG;AAClBH,QAAAA,KAAK,EAAE,KAAKX,QAAL,CAAca,OAAd,CAAsBE,WADX;AAElBH,QAAAA,MAAM,EAAE,KAAKZ,QAAL,CAAca,OAAd,CAAsBG;AAFZ,OAAnB;AAIA,UAAMC,gBAAgB,GAAG,KAAKA,gBAAL,EAAzB;AACA,UAAMC,UAAU,GAAGD,gBAAgB,CAACN,KAAjB,GAAyBG,UAAU,CAACH,KAAvD;AACA,UAAMQ,WAAW,GAAGF,gBAAgB,CAACL,MAAjB,GAA0BE,UAAU,CAACF,MAAzD;;AACA,UAAKO,WAAW,IAAID,UAApB,EAAiC;AAChCtB,QAAAA,MAAM,CAACe,KAAP,GAAef,MAAM,CAACc,KAAP,GAAeO,gBAAgB,CAACN,KAA/C;AACAf,QAAAA,MAAM,CAACgB,MAAP,GAAgBE,UAAU,CAACF,MAAX,GAAoBM,UAApC;AACAtB,QAAAA,MAAM,CAACW,GAAP,GAAa,CAAEU,gBAAgB,CAACL,MAAjB,GAA0BhB,MAAM,CAACgB,MAAnC,IAA8C,CAA3D;AACAhB,QAAAA,MAAM,CAACa,MAAP,GAAgBb,MAAM,CAACW,GAAP,GAAaX,MAAM,CAACgB,MAApC;AACA,OALD,MAKO;AACNhB,QAAAA,MAAM,CAACgB,MAAP,GAAgBhB,MAAM,CAACa,MAAP,GAAgBQ,gBAAgB,CAACL,MAAjD;AACAhB,QAAAA,MAAM,CAACe,KAAP,GAAeG,UAAU,CAACH,KAAX,GAAmBQ,WAAlC;AACAvB,QAAAA,MAAM,CAACY,IAAP,GAAc,CAAES,gBAAgB,CAACN,KAAjB,GAAyBf,MAAM,CAACe,KAAlC,IAA4C,CAA1D;AACAf,QAAAA,MAAM,CAACc,KAAP,GAAed,MAAM,CAACY,IAAP,GAAcZ,MAAM,CAACe,KAApC;AACA;;AACD,aAAOf,MAAP;AACA;;;6BACQ;AACR,WAAKU,QAAL,CAAe;AACdV,QAAAA,MAAM,EAAE,KAAKwB,eAAL;AADM,OAAf;AAGA;;;gCACYC,K,EAAQ;AAAA,wBACW,KAAK3B,KADhB;AAAA,UACZC,UADY,eACZA,UADY;AAAA,UACAC,MADA,eACAA,MADA;AAAA,UAEZ0B,QAFY,GAEC,KAAK/B,KAFN,CAEZ+B,QAFY;;AAIpB,UAAK3B,UAAL,EAAkB;AACjB,YAAMsB,gBAAgB,GAAG,KAAKA,gBAAL,EAAzB;AACA,YAAMM,cAAc,GAAG;AACtBf,UAAAA,IAAI,EAAEa,KAAK,CAACG,KAAN,GAAcP,gBAAgB,CAACT,IADf;AAEtBD,UAAAA,GAAG,EAAEc,KAAK,CAACI,KAAN,GAAcR,gBAAgB,CAACV;AAFd,SAAvB;AAIA,YAAMC,IAAI,GAAGkB,IAAI,CAACC,GAAL,CACZ/B,MAAM,CAACY,IADK,EAEZkB,IAAI,CAACE,GAAL,CAAUL,cAAc,CAACf,IAAzB,EAA+BZ,MAAM,CAACc,KAAtC,CAFY,CAAb;AAIA,YAAMH,GAAG,GAAGmB,IAAI,CAACC,GAAL,CACX/B,MAAM,CAACW,GADI,EAEXmB,IAAI,CAACE,GAAL,CAAUL,cAAc,CAAChB,GAAzB,EAA8BX,MAAM,CAACa,MAArC,CAFW,CAAZ;AAIA,YAAMZ,WAAW,GAAG;AACnBgC,UAAAA,CAAC,EAAE,CACF,CAAErB,IAAI,GAAGZ,MAAM,CAACY,IAAhB,KACES,gBAAgB,CAACN,KAAjB,GAAyBf,MAAM,CAACY,IAAP,GAAc,CADzC,CADE,EAGDsB,OAHC,CAGQ,CAHR,CADgB;AAKnBC,UAAAA,CAAC,EAAE,CACF,CAAExB,GAAG,GAAGX,MAAM,CAACW,GAAf,KACEU,gBAAgB,CAACL,MAAjB,GAA0BhB,MAAM,CAACW,GAAP,GAAa,CADzC,CADE,EAGDuB,OAHC,CAGQ,CAHR;AALgB,SAApB;AAUA,aAAKxB,QAAL,CAAe;AAAET,UAAAA,WAAW,EAAXA;AAAF,SAAf,EAAgC,YAAY;AAC3CyB,UAAAA,QAAQ,CAAE;AACTO,YAAAA,CAAC,EAAE,KAAKnC,KAAL,CAAWG,WAAX,CAAuBgC,CADjB;AAETE,YAAAA,CAAC,EAAE,KAAKrC,KAAL,CAAWG,WAAX,CAAuBkC;AAFjB,WAAF,CAAR;AAIA,SALD;AAMA;AACD;;;yCACqBC,Q,EAAW;AAChC,aAAON,IAAI,CAACO,KAAL,CAAYD,QAAQ,GAAG,GAAvB,CAAP;AACA;;;8CAC0BX,K,EAAQ;AAClC,WAAKa,6BAAL,CAAoC,GAApC,EAAyCb,KAAK,CAACc,MAAN,CAAarC,KAAtD;AACA;;;4CACwBuB,K,EAAQ;AAChC,WAAKa,6BAAL,CAAoC,GAApC,EAAyCb,KAAK,CAACc,MAAN,CAAarC,KAAtD;AACA;;;kDAC8BsC,I,EAAMtC,K,EAAQ;AAAA,UACpCwB,QADoC,GACvB,KAAK/B,KADkB,CACpC+B,QADoC;AAAA,UAEpCzB,WAFoC,GAEpB,KAAKH,KAFe,CAEpCG,WAFoC;AAG5C,UAAMwC,UAAU,GAAGX,IAAI,CAACC,GAAL,CAAUD,IAAI,CAACE,GAAL,CAAUU,QAAQ,CAAExC,KAAF,CAAlB,EAA6B,GAA7B,CAAV,EAA8C,CAA9C,CAAnB;AACAD,MAAAA,WAAW,CAAEuC,IAAF,CAAX,GAAsB,CAAEC,UAAU,GAAGA,UAAU,GAAG,GAAhB,GAAsB,CAAlC,EAAsCP,OAAtC,CACrB,CADqB,CAAtB;AAGA,WAAKxB,QAAL,CAAe;AAAET,QAAAA,WAAW,EAAXA;AAAF,OAAf,EAAgC,YAAY;AAC3CyB,QAAAA,QAAQ,CAAE;AACTO,UAAAA,CAAC,EAAE,KAAKnC,KAAL,CAAWG,WAAX,CAAuBgC,CADjB;AAETE,UAAAA,CAAC,EAAE,KAAKrC,KAAL,CAAWG,WAAX,CAAuBkC;AAFjB,SAAF,CAAR;AAIA,OALD;AAMA;;;uCACkB;AAClB,UAAK,KAAKhC,YAAL,CAAkBc,OAAvB,EAAiC;AAChC,eAAO;AACNF,UAAAA,KAAK,EAAE,KAAKZ,YAAL,CAAkBc,OAAlB,CAA0BE,WAD3B;AAENH,UAAAA,MAAM,EAAE,KAAKb,YAAL,CAAkBc,OAAlB,CAA0BG,YAF5B;AAGNT,UAAAA,GAAG,EACF,KAAKR,YAAL,CAAkBc,OAAlB,CAA0B0B,qBAA1B,GAAkDhC,GAAlD,GACAiC,QAAQ,CAACC,IAAT,CAAcC,SALT;AAMNlC,UAAAA,IAAI,EAAE,KAAKT,YAAL,CAAkBc,OAAlB,CAA0B0B,qBAA1B,GAAkD/B;AANlD,SAAP;AAQA;;AACD,aAAO;AACNG,QAAAA,KAAK,EAAE,CADD;AAENC,QAAAA,MAAM,EAAE,CAFF;AAGNJ,QAAAA,IAAI,EAAE,CAHA;AAIND,QAAAA,GAAG,EAAE;AAJC,OAAP;AAMA;;;yCACoB;AACpB,WAAKD,QAAL,CAAe;AACdX,QAAAA,UAAU,EAAE;AADE,OAAf;AAGA;;;6BACQ;AAAA;;AAAA,wBACmD,KAAKJ,KADxD;AAAA,UACAoD,UADA,eACAA,UADA;AAAA,UACYtC,GADZ,eACYA,GADZ;AAAA,UACiBP,KADjB,eACiBA,KADjB;AAAA,UACwB8C,KADxB,eACwBA,KADxB;AAAA,UAC+BC,IAD/B,eAC+BA,IAD/B;AAAA,UACqCC,SADrC,eACqCA,SADrC;AAAA,yBAEoC,KAAKpD,KAFzC;AAAA,UAEAE,MAFA,gBAEAA,MAFA;AAAA,UAEQD,UAFR,gBAEQA,UAFR;AAAA,UAEoBE,WAFpB,gBAEoBA,WAFpB;AAGR,UAAMoB,gBAAgB,GAAG,KAAKA,gBAAL,EAAzB;AACA,UAAM8B,eAAe,GAAG;AACvBvC,QAAAA,IAAI,EACHV,KAAK,CAAC+B,CAAN,IAAYZ,gBAAgB,CAACN,KAAjB,GAAyBf,MAAM,CAACY,IAAP,GAAc,CAAnD,IACAZ,MAAM,CAACY,IAHe;AAIvBD,QAAAA,GAAG,EACFT,KAAK,CAACiC,CAAN,IAAYd,gBAAgB,CAACL,MAAjB,GAA0BhB,MAAM,CAACW,GAAP,GAAa,CAAnD,IACAX,MAAM,CAACW;AANe,OAAxB;AAQA,UAAMyC,kBAAkB,GAAG;AAC1BxC,QAAAA,IAAI,YAAMuC,eAAe,CAACvC,IAAtB,OADsB;AAE1BD,QAAAA,GAAG,YAAMwC,eAAe,CAACxC,GAAtB;AAFuB,OAA3B;AAIA,UAAM0C,oBAAoB,GAAG,yBAC5B,+CAD4B,EAE5BtD,UAAU,GAAG,aAAH,GAAmB,IAFD,CAA7B;AAIA,UAAMuD,EAAE,kDAA4CP,UAA5C,CAAR;AACA,UAAMQ,oBAAoB,sEAAgER,UAAhE,CAA1B;AACA,UAAMS,kBAAkB,oEAA8DT,UAA9D,CAAxB;AACA,aACC,4BAAC,oBAAD;AACC,QAAA,KAAK,EAAGC,KADT;AAEC,QAAA,EAAE,EAAGM,EAFN;AAGC,QAAA,IAAI,EAAGL,IAHR;AAIC,QAAA,SAAS,EAAGC;AAJb,SAMC;AAAK,QAAA,SAAS,EAAC;AAAf,SACC;AACC,QAAA,SAAS,EAAC,+BADX;AAEC,QAAA,WAAW,EAAG;AAAA,iBACb,MAAI,CAACxC,QAAL,CAAe;AAAEX,YAAAA,UAAU,EAAE;AAAd,WAAf,CADa;AAAA,SAFf;AAKC,QAAA,WAAW,EAAG;AAAA,iBACb,MAAI,CAACW,QAAL,CAAe;AAAEX,YAAAA,UAAU,EAAE;AAAd,WAAf,CADa;AAAA,SALf;AAQC,QAAA,SAAS,EAAG;AAAA,iBACX,MAAI,CAACW,QAAL,CAAe;AAAEX,YAAAA,UAAU,EAAE;AAAd,WAAf,CADW;AAAA,SARb;AAWC,QAAA,MAAM,EAAG;AAAA,iBAAM,MAAI,CAACW,QAAL,CAAe;AAAEX,YAAAA,UAAU,EAAE;AAAd,WAAf,CAAN;AAAA,SAXV;AAYC,QAAA,WAAW,EAAG,KAAKH,WAZpB;AAaC,QAAA,GAAG,EAAG,KAAKO,YAbZ;AAcC,QAAA,IAAI,EAAC,QAdN;AAeC,QAAA,QAAQ,EAAC;AAfV,SAiBC;AACC,QAAA,GAAG,EAAC,mBADL;AAEC,QAAA,MAAM,EAAG,KAAKI,MAFf;AAGC,QAAA,GAAG,EAAG,KAAKH,QAHZ;AAIC,QAAA,GAAG,EAAGK,GAJP;AAKC,QAAA,SAAS,EAAC;AALX,QAjBD,EAwBC;AACC,QAAA,SAAS,EAAG4C,oBADb;AAEC,QAAA,KAAK,EAAGD;AAFT,SAIC,4BAAC,eAAD;AACC,QAAA,SAAS,EAAC,qCADX;AAEC,QAAA,KAAK,EAAC,4BAFP;AAGC,QAAA,OAAO,EAAC;AAHT,SAKC,4BAAC,gBAAD;AACC,QAAA,SAAS,EAAC,6CADX;AAEC,QAAA,CAAC,EAAC;AAFH,QALD,EASC,4BAAC,gBAAD;AACC,QAAA,SAAS,EAAC,0CADX;AAEC,QAAA,CAAC,EAAC;AAFH,QATD,CAJD,CAxBD,CADD,CAND,EAoDC;AAAK,QAAA,SAAS,EAAC;AAAf,SACC,4BAAC,oBAAD;AACC,QAAA,KAAK,EAAG,cAAI,iBAAJ,CADT;AAEC,QAAA,EAAE,EAAGG;AAFN,SAIC;AACC,QAAA,SAAS,EAAC,gCADX;AAEC,QAAA,EAAE,EAAGA,oBAFN;AAGC,QAAA,GAAG,EAAG9D,eAHP;AAIC,QAAA,GAAG,EAAGD,eAJP;AAKC,QAAA,QAAQ,EAAG,KAAKa,yBALjB;AAMC,QAAA,IAAI,EAAC,QANN;AAOC,QAAA,KAAK,EAAG,KAAKoD,oBAAL,CAA2BxD,WAAW,CAACgC,CAAvC;AAPT,QAJD,EAaC,8CAbD,CADD,EAgBC,4BAAC,oBAAD;AACC,QAAA,KAAK,EAAG,cAAI,eAAJ,CADT;AAEC,QAAA,EAAE,EAAGuB;AAFN,SAIC;AACC,QAAA,SAAS,EAAC,gCADX;AAEC,QAAA,EAAE,EAAGA,kBAFN;AAGC,QAAA,GAAG,EAAG/D,eAHP;AAIC,QAAA,GAAG,EAAGD,eAJP;AAKC,QAAA,QAAQ,EAAG,KAAKc,uBALjB;AAMC,QAAA,IAAI,EAAC,QANN;AAOC,QAAA,KAAK,EAAG,KAAKmD,oBAAL,CAA2BxD,WAAW,CAACkC,CAAvC;AAPT,QAJD,EAaC,8CAbD,CAhBD,CApDD,CADD;AAuFA;;;EA/PoCuB,kB;;;AAkQtChE,gBAAgB,CAACiE,YAAjB,GAAgC;AAC/BlD,EAAAA,GAAG,EAAE,IAD0B;AAE/BP,EAAAA,KAAK,EAAE;AACN+B,IAAAA,CAAC,EAAE,GADG;AAENE,IAAAA,CAAC,EAAE;AAFG,GAFwB;AAM/BT,EAAAA,QAAQ,EAAE,oBAAM,CAAE;AANa,CAAhC;;eASe,sBAAS,CAAEkC,uBAAF,EAAkBC,yBAAlB,CAAT,EACdnE,gBADc,C","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component, createRef } from '@wordpress/element';\nimport { withInstanceId, compose } from '@wordpress/compose';\nimport { Path, SVG } from '@wordpress/primitives';\n\n/**\n * Internal dependencies\n */\nimport BaseControl from '../base-control';\nimport withFocusOutside from '../higher-order/with-focus-outside';\n\nconst TEXTCONTROL_MIN = 0;\nconst TEXTCONTROL_MAX = 100;\n\nexport class FocalPointPicker extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.onMouseMove = this.onMouseMove.bind( this );\n\t\tthis.state = {\n\t\t\tisDragging: false,\n\t\t\tbounds: {},\n\t\t\tpercentages: props.value,\n\t\t};\n\t\tthis.containerRef = createRef();\n\t\tthis.imageRef = createRef();\n\t\tthis.horizontalPositionChanged = this.horizontalPositionChanged.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.verticalPositionChanged = this.verticalPositionChanged.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.onLoad = this.onLoad.bind( this );\n\t}\n\tcomponentDidUpdate( prevProps ) {\n\t\tif ( prevProps.url !== this.props.url ) {\n\t\t\tthis.setState( {\n\t\t\t\tisDragging: false,\n\t\t\t} );\n\t\t}\n\t}\n\tcalculateBounds() {\n\t\tconst bounds = {\n\t\t\ttop: 0,\n\t\t\tleft: 0,\n\t\t\tbottom: 0,\n\t\t\tright: 0,\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t};\n\t\tif ( ! this.imageRef.current ) {\n\t\t\treturn bounds;\n\t\t}\n\t\tconst dimensions = {\n\t\t\twidth: this.imageRef.current.clientWidth,\n\t\t\theight: this.imageRef.current.clientHeight,\n\t\t};\n\t\tconst pickerDimensions = this.pickerDimensions();\n\t\tconst widthRatio = pickerDimensions.width / dimensions.width;\n\t\tconst heightRatio = pickerDimensions.height / dimensions.height;\n\t\tif ( heightRatio >= widthRatio ) {\n\t\t\tbounds.width = bounds.right = pickerDimensions.width;\n\t\t\tbounds.height = dimensions.height * widthRatio;\n\t\t\tbounds.top = ( pickerDimensions.height - bounds.height ) / 2;\n\t\t\tbounds.bottom = bounds.top + bounds.height;\n\t\t} else {\n\t\t\tbounds.height = bounds.bottom = pickerDimensions.height;\n\t\t\tbounds.width = dimensions.width * heightRatio;\n\t\t\tbounds.left = ( pickerDimensions.width - bounds.width ) / 2;\n\t\t\tbounds.right = bounds.left + bounds.width;\n\t\t}\n\t\treturn bounds;\n\t}\n\tonLoad() {\n\t\tthis.setState( {\n\t\t\tbounds: this.calculateBounds(),\n\t\t} );\n\t}\n\tonMouseMove( event ) {\n\t\tconst { isDragging, bounds } = this.state;\n\t\tconst { onChange } = this.props;\n\n\t\tif ( isDragging ) {\n\t\t\tconst pickerDimensions = this.pickerDimensions();\n\t\t\tconst cursorPosition = {\n\t\t\t\tleft: event.pageX - pickerDimensions.left,\n\t\t\t\ttop: event.pageY - pickerDimensions.top,\n\t\t\t};\n\t\t\tconst left = Math.max(\n\t\t\t\tbounds.left,\n\t\t\t\tMath.min( cursorPosition.left, bounds.right )\n\t\t\t);\n\t\t\tconst top = Math.max(\n\t\t\t\tbounds.top,\n\t\t\t\tMath.min( cursorPosition.top, bounds.bottom )\n\t\t\t);\n\t\t\tconst percentages = {\n\t\t\t\tx: (\n\t\t\t\t\t( left - bounds.left ) /\n\t\t\t\t\t( pickerDimensions.width - bounds.left * 2 )\n\t\t\t\t).toFixed( 2 ),\n\t\t\t\ty: (\n\t\t\t\t\t( top - bounds.top ) /\n\t\t\t\t\t( pickerDimensions.height - bounds.top * 2 )\n\t\t\t\t).toFixed( 2 ),\n\t\t\t};\n\t\t\tthis.setState( { percentages }, function () {\n\t\t\t\tonChange( {\n\t\t\t\t\tx: this.state.percentages.x,\n\t\t\t\t\ty: this.state.percentages.y,\n\t\t\t\t} );\n\t\t\t} );\n\t\t}\n\t}\n\tfractionToPercentage( fraction ) {\n\t\treturn Math.round( fraction * 100 );\n\t}\n\thorizontalPositionChanged( event ) {\n\t\tthis.positionChangeFromTextControl( 'x', event.target.value );\n\t}\n\tverticalPositionChanged( event ) {\n\t\tthis.positionChangeFromTextControl( 'y', event.target.value );\n\t}\n\tpositionChangeFromTextControl( axis, value ) {\n\t\tconst { onChange } = this.props;\n\t\tconst { percentages } = this.state;\n\t\tconst cleanValue = Math.max( Math.min( parseInt( value ), 100 ), 0 );\n\t\tpercentages[ axis ] = ( cleanValue ? cleanValue / 100 : 0 ).toFixed(\n\t\t\t2\n\t\t);\n\t\tthis.setState( { percentages }, function () {\n\t\t\tonChange( {\n\t\t\t\tx: this.state.percentages.x,\n\t\t\t\ty: this.state.percentages.y,\n\t\t\t} );\n\t\t} );\n\t}\n\tpickerDimensions() {\n\t\tif ( this.containerRef.current ) {\n\t\t\treturn {\n\t\t\t\twidth: this.containerRef.current.clientWidth,\n\t\t\t\theight: this.containerRef.current.clientHeight,\n\t\t\t\ttop:\n\t\t\t\t\tthis.containerRef.current.getBoundingClientRect().top +\n\t\t\t\t\tdocument.body.scrollTop,\n\t\t\t\tleft: this.containerRef.current.getBoundingClientRect().left,\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t\tleft: 0,\n\t\t\ttop: 0,\n\t\t};\n\t}\n\thandleFocusOutside() {\n\t\tthis.setState( {\n\t\t\tisDragging: false,\n\t\t} );\n\t}\n\trender() {\n\t\tconst { instanceId, url, value, label, help, className } = this.props;\n\t\tconst { bounds, isDragging, percentages } = this.state;\n\t\tconst pickerDimensions = this.pickerDimensions();\n\t\tconst iconCoordinates = {\n\t\t\tleft:\n\t\t\t\tvalue.x * ( pickerDimensions.width - bounds.left * 2 ) +\n\t\t\t\tbounds.left,\n\t\t\ttop:\n\t\t\t\tvalue.y * ( pickerDimensions.height - bounds.top * 2 ) +\n\t\t\t\tbounds.top,\n\t\t};\n\t\tconst iconContainerStyle = {\n\t\t\tleft: `${ iconCoordinates.left }px`,\n\t\t\ttop: `${ iconCoordinates.top }px`,\n\t\t};\n\t\tconst iconContainerClasses = classnames(\n\t\t\t'components-focal-point-picker__icon_container',\n\t\t\tisDragging ? 'is-dragging' : null\n\t\t);\n\t\tconst id = `inspector-focal-point-picker-control-${ instanceId }`;\n\t\tconst horizontalPositionId = `inspector-focal-point-picker-control-horizontal-position-${ instanceId }`;\n\t\tconst verticalPositionId = `inspector-focal-point-picker-control-vertical-position-${ instanceId }`;\n\t\treturn (\n\t\t\t<BaseControl\n\t\t\t\tlabel={ label }\n\t\t\t\tid={ id }\n\t\t\t\thelp={ help }\n\t\t\t\tclassName={ className }\n\t\t\t>\n\t\t\t\t<div className=\"components-focal-point-picker-wrapper\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"components-focal-point-picker\"\n\t\t\t\t\t\tonMouseDown={ () =>\n\t\t\t\t\t\t\tthis.setState( { isDragging: true } )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonDragStart={ () =>\n\t\t\t\t\t\t\tthis.setState( { isDragging: true } )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseUp={ () =>\n\t\t\t\t\t\t\tthis.setState( { isDragging: false } )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonDrop={ () => this.setState( { isDragging: false } ) }\n\t\t\t\t\t\tonMouseMove={ this.onMouseMove }\n\t\t\t\t\t\tref={ this.containerRef }\n\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\ttabIndex=\"-1\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\talt=\"Dimensions helper\"\n\t\t\t\t\t\t\tonLoad={ this.onLoad }\n\t\t\t\t\t\t\tref={ this.imageRef }\n\t\t\t\t\t\t\tsrc={ url }\n\t\t\t\t\t\t\tdraggable=\"false\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={ iconContainerClasses }\n\t\t\t\t\t\t\tstyle={ iconContainerStyle }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<SVG\n\t\t\t\t\t\t\t\tclassName=\"components-focal-point-picker__icon\"\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\tviewBox=\"0 0 30 30\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Path\n\t\t\t\t\t\t\t\t\tclassName=\"components-focal-point-picker__icon-outline\"\n\t\t\t\t\t\t\t\t\td=\"M15 1C7.3 1 1 7.3 1 15s6.3 14 14 14 14-6.3 14-14S22.7 1 15 1zm0 22c-4.4 0-8-3.6-8-8s3.6-8 8-8 8 3.6 8 8-3.6 8-8 8z\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<Path\n\t\t\t\t\t\t\t\t\tclassName=\"components-focal-point-picker__icon-fill\"\n\t\t\t\t\t\t\t\t\td=\"M15 3C8.4 3 3 8.4 3 15s5.4 12 12 12 12-5.4 12-12S21.6 3 15 3zm0 22C9.5 25 5 20.5 5 15S9.5 5 15 5s10 4.5 10 10-4.5 10-10 10z\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</SVG>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"components-focal-point-picker_position-display-container\">\n\t\t\t\t\t<BaseControl\n\t\t\t\t\t\tlabel={ __( 'Horizontal pos.' ) }\n\t\t\t\t\t\tid={ horizontalPositionId }\n\t\t\t\t\t>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName=\"components-text-control__input\"\n\t\t\t\t\t\t\tid={ horizontalPositionId }\n\t\t\t\t\t\t\tmax={ TEXTCONTROL_MAX }\n\t\t\t\t\t\t\tmin={ TEXTCONTROL_MIN }\n\t\t\t\t\t\t\tonChange={ this.horizontalPositionChanged }\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\tvalue={ this.fractionToPercentage( percentages.x ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<span>%</span>\n\t\t\t\t\t</BaseControl>\n\t\t\t\t\t<BaseControl\n\t\t\t\t\t\tlabel={ __( 'Vertical pos.' ) }\n\t\t\t\t\t\tid={ verticalPositionId }\n\t\t\t\t\t>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName=\"components-text-control__input\"\n\t\t\t\t\t\t\tid={ verticalPositionId }\n\t\t\t\t\t\t\tmax={ TEXTCONTROL_MAX }\n\t\t\t\t\t\t\tmin={ TEXTCONTROL_MIN }\n\t\t\t\t\t\t\tonChange={ this.verticalPositionChanged }\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\tvalue={ this.fractionToPercentage( percentages.y ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<span>%</span>\n\t\t\t\t\t</BaseControl>\n\t\t\t\t</div>\n\t\t\t</BaseControl>\n\t\t);\n\t}\n}\n\nFocalPointPicker.defaultProps = {\n\turl: null,\n\tvalue: {\n\t\tx: 0.5,\n\t\ty: 0.5,\n\t},\n\tonChange: () => {},\n};\n\nexport default compose( [ withInstanceId, withFocusOutside ] )(\n\tFocalPointPicker\n);\n"]}