{"version":3,"sources":["@wordpress/components/src/input-control/input-field.js"],"names":["noop","useDrag","useEffect","useRef","forwardRef","UP","DOWN","ENTER","useDragCursor","Input","useInputControlStateReducer","isValueEmpty","InputField","ref","disabled","dragDirection","dragThreshold","id","isDragEnabled","isFloating","isFloatingLabelSet","isPressEnterToChange","onBlur","onChange","onDrag","onDragEnd","onDragStart","onFocus","onKeyDown","onUpdateValue","onValidate","size","stateReducer","state","valueProp","value","props","change","commit","drag","dragEnd","dragStart","invalidate","pressDown","pressEnter","pressUp","reset","update","_event","isDragging","isDirty","valueRef","dragCursor","current","event","handleOnBlur","handleOnCommit","target","handleOnFocus","handleOnChange","nextValue","err","handleOnKeyDown","keyCode","preventDefault","dragGestureProps","dragProps","distance","dragging","stopPropagation","threshold","enabled","ForwardedComponent"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { noop } from 'lodash';\nimport { useDrag } from 'react-use-gesture';\n\n/**\n * WordPress dependencies\n */\nimport { useEffect, useRef, forwardRef } from '@wordpress/element';\nimport { UP, DOWN, ENTER } from '@wordpress/keycodes';\n/**\n * Internal dependencies\n */\nimport { useDragCursor } from './utils';\nimport { Input } from './styles/input-control-styles';\nimport { useInputControlStateReducer } from './state';\nimport { isValueEmpty } from '../utils/values';\n\nfunction InputField(\n\t{\n\t\tdisabled = false,\n\t\tdragDirection = 'n',\n\t\tdragThreshold = 10,\n\t\tid,\n\t\tisDragEnabled = false,\n\t\tisFloating = false,\n\t\tisFloatingLabelSet = false,\n\t\tisPressEnterToChange = false,\n\t\tonBlur = noop,\n\t\tonChange = noop,\n\t\tonDrag = noop,\n\t\tonDragEnd = noop,\n\t\tonDragStart = noop,\n\t\tonFocus = noop,\n\t\tonKeyDown = noop,\n\t\tonUpdateValue,\n\t\tonValidate = noop,\n\t\tsize = 'default',\n\t\tstateReducer = ( state ) => state,\n\t\tvalue: valueProp,\n\t\t...props\n\t},\n\tref\n) {\n\tconst {\n\t\t// State\n\t\tstate,\n\t\t// Actions\n\t\tchange,\n\t\tcommit,\n\t\tdrag,\n\t\tdragEnd,\n\t\tdragStart,\n\t\tinvalidate,\n\t\tpressDown,\n\t\tpressEnter,\n\t\tpressUp,\n\t\treset,\n\t\tupdate,\n\t} = useInputControlStateReducer( stateReducer, {\n\t\tisDragEnabled,\n\t\tvalue: valueProp,\n\t\tisPressEnterToChange,\n\t} );\n\n\tconst { _event, value, isDragging, isDirty } = state;\n\n\tconst valueRef = useRef( value );\n\tconst dragCursor = useDragCursor( isDragging, dragDirection );\n\n\tuseEffect( () => {\n\t\t/**\n\t\t * Handles syncing incoming value changes with internal state.\n\t\t * This effectively enables a \"controlled\" state.\n\t\t * https://reactjs.org/docs/forms.html#controlled-components\n\t\t */\n\t\tif ( valueProp !== valueRef.current ) {\n\t\t\tupdate( valueProp );\n\t\t\tvalueRef.current = valueProp;\n\n\t\t\t// Quick return to avoid firing the onChange callback\n\t\t\treturn;\n\t\t}\n\n\t\t/**\n\t\t * Fires the onChange callback when internal state value changes.\n\t\t */\n\t\tif ( value !== valueRef.current && ! isDirty ) {\n\t\t\tonChange( value, { event: _event } );\n\t\t\tonUpdateValue( ! isValueEmpty( value ) );\n\n\t\t\tvalueRef.current = value;\n\t\t}\n\t}, [ value, isDirty, valueProp ] );\n\n\tconst handleOnBlur = ( event ) => {\n\t\tonBlur( event );\n\n\t\t/**\n\t\t * If isPressEnterToChange is set, this commits the value to\n\t\t * the onChange callback.\n\t\t */\n\t\tif ( isPressEnterToChange && isDirty ) {\n\t\t\tif ( ! isValueEmpty( value ) ) {\n\t\t\t\thandleOnCommit( { target: { value } }, event );\n\t\t\t} else {\n\t\t\t\treset( valueProp );\n\t\t\t}\n\t\t}\n\t};\n\n\tconst handleOnFocus = ( event ) => {\n\t\tonFocus( event );\n\t};\n\n\tconst handleOnChange = ( event ) => {\n\t\tconst nextValue = event.target.value;\n\t\tchange( nextValue, event );\n\t};\n\n\tconst handleOnCommit = ( event ) => {\n\t\tconst nextValue = event.target.value;\n\n\t\ttry {\n\t\t\tonValidate( nextValue, { event } );\n\t\t\tcommit( nextValue, event );\n\t\t} catch ( err ) {\n\t\t\tinvalidate( err, { event } );\n\t\t}\n\t};\n\n\tconst handleOnKeyDown = ( event ) => {\n\t\tconst { keyCode } = event;\n\t\tonKeyDown( event );\n\n\t\tswitch ( keyCode ) {\n\t\t\tcase UP:\n\t\t\t\tpressUp( event );\n\t\t\t\tbreak;\n\n\t\t\tcase DOWN:\n\t\t\t\tpressDown( event );\n\t\t\t\tbreak;\n\n\t\t\tcase ENTER:\n\t\t\t\tpressEnter( event );\n\n\t\t\t\tif ( isPressEnterToChange ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\thandleOnCommit( event );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tconst dragGestureProps = useDrag(\n\t\t( dragProps ) => {\n\t\t\tconst { distance, dragging, event } = dragProps;\n\n\t\t\tif ( ! isDragEnabled ) return;\n\t\t\tif ( ! distance ) return;\n\t\t\tevent.stopPropagation();\n\n\t\t\t/**\n\t\t\t * Quick return if no longer dragging.\n\t\t\t * This prevents unnecessary value calculations.\n\t\t\t */\n\t\t\tif ( ! dragging ) {\n\t\t\t\tonDragEnd( dragProps );\n\t\t\t\tdragEnd( dragProps );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tonDrag( dragProps );\n\t\t\tdrag( dragProps );\n\n\t\t\tif ( ! isDragging ) {\n\t\t\t\tonDragStart( dragProps );\n\t\t\t\tdragStart( dragProps );\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\tthreshold: dragThreshold,\n\t\t\tenabled: isDragEnabled,\n\t\t}\n\t);\n\n\treturn (\n\t\t<Input\n\t\t\t{ ...props }\n\t\t\t{ ...dragGestureProps() }\n\t\t\tclassName=\"components-input-control__input\"\n\t\t\tdisabled={ disabled }\n\t\t\tdragCursor={ dragCursor }\n\t\t\tisDragging={ isDragging }\n\t\t\tid={ id }\n\t\t\tisFloating={ isFloating }\n\t\t\tisFloatingLabel={ isFloatingLabelSet }\n\t\t\tonBlur={ handleOnBlur }\n\t\t\tonChange={ handleOnChange }\n\t\t\tonFocus={ handleOnFocus }\n\t\t\tonKeyDown={ handleOnKeyDown }\n\t\t\tref={ ref }\n\t\t\tsize={ size }\n\t\t\tvalue={ value }\n\t\t/>\n\t);\n}\n\nconst ForwardedComponent = forwardRef( InputField );\n\nexport default ForwardedComponent;\n"]}