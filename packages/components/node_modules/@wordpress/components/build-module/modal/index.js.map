{"version":3,"sources":["@wordpress/components/src/modal/index.js"],"names":["Component","createPortal","withInstanceId","deprecated","ModalFrame","ModalHeader","ariaHelper","parentElement","openModalCount","Modal","props","prepareDOM","openFirstModal","closeLastModal","cleanDOM","document","createElement","body","appendChild","node","removeChild","hideApp","classList","add","bodyOpenClassName","remove","showApp","onRequestClose","title","icon","closeButtonLabel","children","aria","instanceId","isDismissible","isDismissable","otherProps","headingId","labelledby","alternative","describedby","defaultProps","role","focusOnMount","shouldCloseOnEsc","shouldCloseOnClickOutside"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { Component, createPortal } from '@wordpress/element';\nimport { withInstanceId } from '@wordpress/compose';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport ModalFrame from './frame';\nimport ModalHeader from './header';\nimport * as ariaHelper from './aria-helper';\n\n// Used to count the number of open modals.\nlet parentElement,\n\topenModalCount = 0;\n\nclass Modal extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.prepareDOM();\n\t}\n\n\t/**\n\t * Appends the modal's node to the DOM, so the portal can render the\n\t * modal in it. Also calls the openFirstModal when this is the first modal to be\n\t * opened.\n\t */\n\tcomponentDidMount() {\n\t\topenModalCount++;\n\n\t\tif ( openModalCount === 1 ) {\n\t\t\tthis.openFirstModal();\n\t\t}\n\t}\n\n\t/**\n\t * Removes the modal's node from the DOM. Also calls closeLastModal when this is\n\t * the last modal to be closed.\n\t */\n\tcomponentWillUnmount() {\n\t\topenModalCount--;\n\n\t\tif ( openModalCount === 0 ) {\n\t\t\tthis.closeLastModal();\n\t\t}\n\n\t\tthis.cleanDOM();\n\t}\n\n\t/**\n\t * Prepares the DOM for the modals to be rendered.\n\t *\n\t * Every modal is mounted in a separate div appended to a parent div\n\t * that is appended to the document body.\n\t *\n\t * The parent div will be created if it does not yet exist, and the\n\t * separate div for this specific modal will be appended to that.\n\t */\n\tprepareDOM() {\n\t\tif ( ! parentElement ) {\n\t\t\tparentElement = document.createElement( 'div' );\n\t\t\tdocument.body.appendChild( parentElement );\n\t\t}\n\t\tthis.node = document.createElement( 'div' );\n\t\tparentElement.appendChild( this.node );\n\t}\n\n\t/**\n\t * Removes the specific mounting point for this modal from the DOM.\n\t */\n\tcleanDOM() {\n\t\tparentElement.removeChild( this.node );\n\t}\n\n\t/**\n\t * Prepares the DOM for this modal and any additional modal to be mounted.\n\t *\n\t * It appends an additional div to the body for the modals to be rendered in,\n\t * it hides any other elements from screen-readers and adds an additional class\n\t * to the body to prevent scrolling while the modal is open.\n\t */\n\topenFirstModal() {\n\t\tariaHelper.hideApp( parentElement );\n\t\tdocument.body.classList.add( this.props.bodyOpenClassName );\n\t}\n\n\t/**\n\t * Cleans up the DOM after the last modal is closed and makes the app available\n\t * for screen-readers again.\n\t */\n\tcloseLastModal() {\n\t\tdocument.body.classList.remove( this.props.bodyOpenClassName );\n\t\tariaHelper.showApp();\n\t}\n\n\t/**\n\t * Renders the modal.\n\t *\n\t * @return {WPElement} The modal element.\n\t */\n\trender() {\n\t\tconst {\n\t\t\tonRequestClose,\n\t\t\ttitle,\n\t\t\ticon,\n\t\t\tcloseButtonLabel,\n\t\t\tchildren,\n\t\t\taria,\n\t\t\tinstanceId,\n\t\t\tisDismissible,\n\t\t\tisDismissable, //Deprecated\n\t\t\t// Many of the documented props for Modal are passed straight through\n\t\t\t// to the ModalFrame component and handled there.\n\t\t\t...otherProps\n\t\t} = this.props;\n\n\t\tconst headingId =\n\t\t\taria.labelledby || `components-modal-header-${ instanceId }`;\n\n\t\tif ( isDismissable ) {\n\t\t\tdeprecated( 'isDismissable prop of the Modal component', {\n\t\t\t\talternative:\n\t\t\t\t\t'isDismissible prop (renamed) of the Modal component',\n\t\t\t} );\n\t\t}\n\t\t// Disable reason: this stops mouse events from triggering tooltips and\n\t\t// other elements underneath the modal overlay.\n\t\treturn createPortal(\n\t\t\t<ModalFrame\n\t\t\t\tonRequestClose={ onRequestClose }\n\t\t\t\taria={ {\n\t\t\t\t\tlabelledby: title ? headingId : null,\n\t\t\t\t\tdescribedby: aria.describedby,\n\t\t\t\t} }\n\t\t\t\t{ ...otherProps }\n\t\t\t>\n\t\t\t\t<div className={ 'components-modal__content' } role=\"document\">\n\t\t\t\t\t<ModalHeader\n\t\t\t\t\t\tcloseLabel={ closeButtonLabel }\n\t\t\t\t\t\theadingId={ headingId }\n\t\t\t\t\t\ticon={ icon }\n\t\t\t\t\t\tisDismissible={ isDismissible || isDismissable }\n\t\t\t\t\t\tonClose={ onRequestClose }\n\t\t\t\t\t\ttitle={ title }\n\t\t\t\t\t/>\n\t\t\t\t\t{ children }\n\t\t\t\t</div>\n\t\t\t</ModalFrame>,\n\t\t\tthis.node\n\t\t);\n\t}\n}\n\nModal.defaultProps = {\n\tbodyOpenClassName: 'modal-open',\n\trole: 'dialog',\n\ttitle: null,\n\tfocusOnMount: true,\n\tshouldCloseOnEsc: true,\n\tshouldCloseOnClickOutside: true,\n\tisDismissible: true,\n\t/* accessibility */\n\taria: {\n\t\tlabelledby: null,\n\t\tdescribedby: null,\n\t},\n};\n\nexport default withInstanceId( Modal );\n"]}