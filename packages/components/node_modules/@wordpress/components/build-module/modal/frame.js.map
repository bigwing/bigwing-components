{"version":3,"sources":["@wordpress/components/src/modal/frame.js"],"names":["classnames","Component","createRef","ESCAPE","compose","IsolatedEventContainer","withFocusOutside","withFocusReturn","withConstrainedTabbing","ModalFrame","arguments","containerRef","handleKeyDown","bind","handleFocusOutside","props","focusOnMount","current","focus","event","shouldCloseOnClickOutside","onRequestClose","keyCode","handleEscapeKeyDown","shouldCloseOnEsc","stopPropagation","overlayClassName","contentLabel","aria","describedby","labelledby","children","className","role","style"],"mappings":";;;;;;;;;;;;AAAA;;;AAGA,OAAOA,UAAP,MAAuB,YAAvB;AAEA;;;;AAIA,SAASC,SAAT,EAAoBC,SAApB,QAAqC,oBAArC;AACA,SAASC,MAAT,QAAuB,qBAAvB;AACA,SAASC,OAAT,QAAwB,oBAAxB;AAEA;;;;AAGA,OAAOC,sBAAP,MAAmC,6BAAnC;AACA,OAAOC,gBAAP,MAA6B,oCAA7B;AACA,OAAOC,eAAP,MAA4B,mCAA5B;AACA,OAAOC,sBAAP,MAAmC,0CAAnC;;IAEMC,U;;;;;AACL,wBAAc;AAAA;;AAAA;;AACb,+BAAUC,SAAV;AAEA,UAAKC,YAAL,GAAoBT,SAAS,EAA7B;AACA,UAAKU,aAAL,GAAqB,MAAKA,aAAL,CAAmBC,IAAnB,+BAArB;AACA,UAAKC,kBAAL,GAA0B,MAAKA,kBAAL,CAAwBD,IAAxB,+BAA1B;AALa;AAMb;AAED;;;;;;;wCAGoB;AACnB;AACA,UAAK,KAAKE,KAAL,CAAWC,YAAhB,EAA+B;AAC9B,aAAKL,YAAL,CAAkBM,OAAlB,CAA0BC,KAA1B;AACA;AACD;AAED;;;;;;;;uCAKoBC,K,EAAQ;AAC3B,UAAK,KAAKJ,KAAL,CAAWK,yBAAhB,EAA4C;AAC3C,aAAKC,cAAL,CAAqBF,KAArB;AACA;AACD;AAED;;;;;;;;kCAKeA,K,EAAQ;AACtB,UAAKA,KAAK,CAACG,OAAN,KAAkBnB,MAAvB,EAAgC;AAC/B,aAAKoB,mBAAL,CAA0BJ,KAA1B;AACA;AACD;AAED;;;;;;;;;;wCAOqBA,K,EAAQ;AAC5B,UAAK,KAAKJ,KAAL,CAAWS,gBAAhB,EAAmC;AAClCL,QAAAA,KAAK,CAACM,eAAN;AACA,aAAKJ,cAAL,CAAqBF,KAArB;AACA;AACD;AAED;;;;;;;;mCAKgBA,K,EAAQ;AAAA,UACfE,cADe,GACI,KAAKN,KADT,CACfM,cADe;;AAEvB,UAAKA,cAAL,EAAsB;AACrBA,QAAAA,cAAc,CAAEF,KAAF,CAAd;AACA;AACD;AAED;;;;;;;;6BAKS;AAAA,wBASJ,KAAKJ,KATD;AAAA,UAEPW,gBAFO,eAEPA,gBAFO;AAAA,UAGPC,YAHO,eAGPA,YAHO;AAAA,yCAIPC,IAJO;AAAA,UAICC,WAJD,oBAICA,WAJD;AAAA,UAIcC,UAJd,oBAIcA,UAJd;AAAA,UAKPC,QALO,eAKPA,QALO;AAAA,UAMPC,SANO,eAMPA,SANO;AAAA,UAOPC,IAPO,eAOPA,IAPO;AAAA,UAQPC,KARO,eAQPA,KARO;AAWR,aACC,cAAC,sBAAD;AACC,QAAA,SAAS,EAAGlC,UAAU,CACrB,kCADqB,EAErB0B,gBAFqB,CADvB;AAKC,QAAA,SAAS,EAAG,KAAKd;AALlB,SAOC;AACC,QAAA,SAAS,EAAGZ,UAAU,CACrB,yBADqB,EAErBgC,SAFqB,CADvB;AAKC,QAAA,KAAK,EAAGE,KALT;AAMC,QAAA,GAAG,EAAG,KAAKvB,YANZ;AAOC,QAAA,IAAI,EAAGsB,IAPR;AAQC,sBAAaN,YARd;AASC,2BAAkBA,YAAY,GAAG,IAAH,GAAUG,UATzC;AAUC,4BAAmBD,WAVpB;AAWC,QAAA,QAAQ,EAAC;AAXV,SAaGE,QAbH,CAPD,CADD;AAyBA;;;;EA5GuB9B,S;;AA+GzB,eAAeG,OAAO,CAAE,CACvBG,eADuB,EAEvBC,sBAFuB,EAGvBF,gBAHuB,CAAF,CAAP,CAIVG,UAJU,CAAf","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\n\nimport { Component, createRef } from '@wordpress/element';\nimport { ESCAPE } from '@wordpress/keycodes';\nimport { compose } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport IsolatedEventContainer from '../isolated-event-container';\nimport withFocusOutside from '../higher-order/with-focus-outside';\nimport withFocusReturn from '../higher-order/with-focus-return';\nimport withConstrainedTabbing from '../higher-order/with-constrained-tabbing';\n\nclass ModalFrame extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.containerRef = createRef();\n\t\tthis.handleKeyDown = this.handleKeyDown.bind( this );\n\t\tthis.handleFocusOutside = this.handleFocusOutside.bind( this );\n\t}\n\n\t/**\n\t * Focuses the first tabbable element when props.focusOnMount is true.\n\t */\n\tcomponentDidMount() {\n\t\t// Focus on mount\n\t\tif ( this.props.focusOnMount ) {\n\t\t\tthis.containerRef.current.focus();\n\t\t}\n\t}\n\n\t/**\n\t * Callback function called when clicked outside the modal.\n\t *\n\t * @param {Object} event Mouse click event.\n\t */\n\thandleFocusOutside( event ) {\n\t\tif ( this.props.shouldCloseOnClickOutside ) {\n\t\t\tthis.onRequestClose( event );\n\t\t}\n\t}\n\n\t/**\n\t * Callback function called when a key is pressed.\n\t *\n\t * @param {KeyboardEvent} event Key down event.\n\t */\n\thandleKeyDown( event ) {\n\t\tif ( event.keyCode === ESCAPE ) {\n\t\t\tthis.handleEscapeKeyDown( event );\n\t\t}\n\t}\n\n\t/**\n\t * Handles a escape key down event.\n\t *\n\t * Calls onRequestClose and prevents propagation of the event outside the modal.\n\t *\n\t * @param {Object} event Key down event.\n\t */\n\thandleEscapeKeyDown( event ) {\n\t\tif ( this.props.shouldCloseOnEsc ) {\n\t\t\tevent.stopPropagation();\n\t\t\tthis.onRequestClose( event );\n\t\t}\n\t}\n\n\t/**\n\t * Calls the onRequestClose callback props when it is available.\n\t *\n\t * @param {Object} event Event object.\n\t */\n\tonRequestClose( event ) {\n\t\tconst { onRequestClose } = this.props;\n\t\tif ( onRequestClose ) {\n\t\t\tonRequestClose( event );\n\t\t}\n\t}\n\n\t/**\n\t * Renders the modal frame element.\n\t *\n\t * @return {WPElement} The modal frame element.\n\t */\n\trender() {\n\t\tconst {\n\t\t\toverlayClassName,\n\t\t\tcontentLabel,\n\t\t\taria: { describedby, labelledby },\n\t\t\tchildren,\n\t\t\tclassName,\n\t\t\trole,\n\t\t\tstyle,\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<IsolatedEventContainer\n\t\t\t\tclassName={ classnames(\n\t\t\t\t\t'components-modal__screen-overlay',\n\t\t\t\t\toverlayClassName\n\t\t\t\t) }\n\t\t\t\tonKeyDown={ this.handleKeyDown }\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t'components-modal__frame',\n\t\t\t\t\t\tclassName\n\t\t\t\t\t) }\n\t\t\t\t\tstyle={ style }\n\t\t\t\t\tref={ this.containerRef }\n\t\t\t\t\trole={ role }\n\t\t\t\t\taria-label={ contentLabel }\n\t\t\t\t\taria-labelledby={ contentLabel ? null : labelledby }\n\t\t\t\t\taria-describedby={ describedby }\n\t\t\t\t\ttabIndex=\"-1\"\n\t\t\t\t>\n\t\t\t\t\t{ children }\n\t\t\t\t</div>\n\t\t\t</IsolatedEventContainer>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithFocusReturn,\n\twithConstrainedTabbing,\n\twithFocusOutside,\n] )( ModalFrame );\n"]}