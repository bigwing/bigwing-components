{"version":3,"sources":["@wordpress/components/src/color-picker/index.native.js"],"names":["View","Text","TouchableWithoutFeedback","Platform","HsvColorPicker","tinycolor","useState","useEffect","__","BottomSheet","usePreferredColorSchemeStyle","Icon","check","close","styles","ColorPicker","shouldEnableBottomSheetScroll","shouldDisableBottomSheetMaxHeight","isBottomSheetContentScrolling","setColor","activeColor","isGradientColor","onNavigationBack","onCloseBottomSheet","isIOS","OS","hitSlop","top","bottom","left","right","hue","setHue","sat","setSaturation","val","setValue","savedColor","picker","spacing","paddingLeft","pickerHeight","height","borderRadius","pickerPointerSize","pickerPointer","pickerWidth","getWidth","applyButtonStyle","applyButton","applyButtonDark","cancelButtonStyle","cancelButton","cancelButtonDark","colorTextStyle","colorText","colorTextDark","footerStyle","footer","footerDark","currentColor","toHexString","setHSVFromHex","color","toHsv","h","s","v","onHuePickerChange","onSatValPickerChange","saturation","value","onButtonPress","action","width","toUpperCase"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { View, Text, TouchableWithoutFeedback, Platform } from 'react-native';\nimport HsvColorPicker from 'react-native-hsv-color-picker';\nimport tinycolor from 'tinycolor2';\n/**\n * WordPress dependencies\n */\nimport { useState, useEffect } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { BottomSheet } from '@wordpress/components';\nimport { usePreferredColorSchemeStyle } from '@wordpress/compose';\nimport { Icon, check, close } from '@wordpress/icons';\n/**\n * Internal dependencies\n */\nimport styles from './style.scss';\n\nfunction ColorPicker( {\n\tshouldEnableBottomSheetScroll,\n\tshouldDisableBottomSheetMaxHeight,\n\tisBottomSheetContentScrolling,\n\tsetColor,\n\tactiveColor,\n\tisGradientColor,\n\tonNavigationBack,\n\tonCloseBottomSheet,\n} ) {\n\tconst isIOS = Platform.OS === 'ios';\n\tconst hitSlop = { top: 22, bottom: 22, left: 22, right: 22 };\n\n\tconst [ hue, setHue ] = useState( 0 );\n\tconst [ sat, setSaturation ] = useState( 0.5 );\n\tconst [ val, setValue ] = useState( 0.5 );\n\tconst [ savedColor ] = useState( activeColor );\n\n\tconst {\n\t\tpaddingLeft: spacing,\n\t\theight: pickerHeight,\n\t\tborderRadius,\n\t} = styles.picker;\n\tconst { height: pickerPointerSize } = styles.pickerPointer;\n\tconst pickerWidth = BottomSheet.getWidth() - 2 * spacing;\n\n\tconst applyButtonStyle = usePreferredColorSchemeStyle(\n\t\tstyles.applyButton,\n\t\tstyles.applyButtonDark\n\t);\n\tconst cancelButtonStyle = usePreferredColorSchemeStyle(\n\t\tstyles.cancelButton,\n\t\tstyles.cancelButtonDark\n\t);\n\tconst colorTextStyle = usePreferredColorSchemeStyle(\n\t\tstyles.colorText,\n\t\tstyles.colorTextDark\n\t);\n\tconst footerStyle = usePreferredColorSchemeStyle(\n\t\tstyles.footer,\n\t\tstyles.footerDark\n\t);\n\n\tconst currentColor = tinycolor(\n\t\t`hsv ${ hue } ${ sat } ${ val }`\n\t).toHexString();\n\n\tfunction setHSVFromHex( color ) {\n\t\tconst { h, s, v } = tinycolor( color ).toHsv();\n\n\t\tsetHue( h );\n\t\tsetSaturation( s );\n\t\tsetValue( v );\n\t}\n\n\tuseEffect( () => {\n\t\tsetColor( currentColor );\n\t}, [ currentColor ] );\n\n\tuseEffect( () => {\n\t\tif ( ! isGradientColor && activeColor ) {\n\t\t\tsetHSVFromHex( activeColor );\n\t\t}\n\t\tsetColor( activeColor );\n\t\tshouldDisableBottomSheetMaxHeight( false );\n\t\tonCloseBottomSheet( () => setColor( savedColor ) );\n\t}, [] );\n\n\tfunction onHuePickerChange( { hue: h } ) {\n\t\tsetHue( h );\n\t}\n\n\tfunction onSatValPickerChange( { saturation: s, value: v } ) {\n\t\tsetSaturation( s );\n\t\tsetValue( v );\n\t}\n\n\tfunction onButtonPress( action ) {\n\t\tonNavigationBack();\n\t\tonCloseBottomSheet( null );\n\t\tshouldDisableBottomSheetMaxHeight( true );\n\t\tsetColor( action === 'apply' ? currentColor : savedColor );\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<HsvColorPicker\n\t\t\t\thuePickerHue={ hue }\n\t\t\t\tonHuePickerDragMove={ onHuePickerChange }\n\t\t\t\tonHuePickerPress={\n\t\t\t\t\t! isBottomSheetContentScrolling && onHuePickerChange\n\t\t\t\t}\n\t\t\t\tsatValPickerHue={ hue }\n\t\t\t\tsatValPickerSaturation={ sat }\n\t\t\t\tsatValPickerValue={ val }\n\t\t\t\tonSatValPickerDragMove={ onSatValPickerChange }\n\t\t\t\tonSatValPickerPress={\n\t\t\t\t\t! isBottomSheetContentScrolling && onSatValPickerChange\n\t\t\t\t}\n\t\t\t\tonSatValPickerDragStart={ () => {\n\t\t\t\t\tshouldEnableBottomSheetScroll( false );\n\t\t\t\t} }\n\t\t\t\tonSatValPickerDragEnd={ () =>\n\t\t\t\t\tshouldEnableBottomSheetScroll( true )\n\t\t\t\t}\n\t\t\t\tonHuePickerDragStart={ () =>\n\t\t\t\t\tshouldEnableBottomSheetScroll( false )\n\t\t\t\t}\n\t\t\t\tonHuePickerDragEnd={ () =>\n\t\t\t\t\tshouldEnableBottomSheetScroll( true )\n\t\t\t\t}\n\t\t\t\thuePickerBarWidth={ pickerWidth }\n\t\t\t\thuePickerBarHeight={ pickerPointerSize / 2 }\n\t\t\t\tsatValPickerSize={ {\n\t\t\t\t\twidth: pickerWidth,\n\t\t\t\t\theight: pickerHeight,\n\t\t\t\t} }\n\t\t\t\tsatValPickerSliderSize={ pickerPointerSize * 2 }\n\t\t\t\tsatValPickerBorderRadius={ borderRadius }\n\t\t\t\thuePickerBorderRadius={ borderRadius }\n\t\t\t/>\n\t\t\t<View style={ footerStyle }>\n\t\t\t\t<TouchableWithoutFeedback\n\t\t\t\t\tonPress={ () => onButtonPress( 'cancel' ) }\n\t\t\t\t\thitSlop={ hitSlop }\n\t\t\t\t>\n\t\t\t\t\t<View>\n\t\t\t\t\t\t{ isIOS ? (\n\t\t\t\t\t\t\t<Text style={ cancelButtonStyle }>\n\t\t\t\t\t\t\t\t{ __( 'Cancel' ) }\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\ticon={ close }\n\t\t\t\t\t\t\t\tsize={ 24 }\n\t\t\t\t\t\t\t\tstyle={ cancelButtonStyle }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</View>\n\t\t\t\t</TouchableWithoutFeedback>\n\t\t\t\t<Text style={ colorTextStyle } selectable>\n\t\t\t\t\t{ currentColor.toUpperCase() }\n\t\t\t\t</Text>\n\t\t\t\t<TouchableWithoutFeedback\n\t\t\t\t\tonPress={ () => onButtonPress( 'apply' ) }\n\t\t\t\t\thitSlop={ hitSlop }\n\t\t\t\t>\n\t\t\t\t\t<View>\n\t\t\t\t\t\t{ isIOS ? (\n\t\t\t\t\t\t\t<Text style={ applyButtonStyle }>\n\t\t\t\t\t\t\t\t{ __( 'Apply' ) }\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\ticon={ check }\n\t\t\t\t\t\t\t\tsize={ 24 }\n\t\t\t\t\t\t\t\tstyle={ applyButtonStyle }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</View>\n\t\t\t\t</TouchableWithoutFeedback>\n\t\t\t</View>\n\t\t</>\n\t);\n}\n\nexport default ColorPicker;\n"]}