{"version":3,"sources":["@wordpress/components/src/color-picker/index.js"],"names":["classnames","debounce","noop","partial","Component","Alpha","Hue","Inputs","Saturation","colorToState","simpleCheckForValidColor","isValidHex","toLowerCase","value","String","isValueEmpty","data","source","hex","h","s","l","r","g","b","v","a","isValidColor","colors","dataToColors","oldColors","valueKey","ColorPicker","color","arguments","state","draftHex","draftRgb","rgb","draftHsl","hsl","commitValues","bind","setDraftValues","resetDraftValues","handleInputChange","props","oldHue","onChangeComplete","setState","className","disableAlpha","hsv","classes","backgroundColor","toRgbString"],"mappings":"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","sourcesContent":["/**\n * Parts of this source were derived and modified from react-color,\n * released under the MIT license.\n *\n * https://github.com/casesandberg/react-color/\n *\n * Copyright (c) 2015 Case Sandberg\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { debounce, noop, partial } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport Alpha from './alpha';\nimport Hue from './hue';\nimport Inputs from './inputs';\nimport Saturation from './saturation';\nimport { colorToState, simpleCheckForValidColor, isValidHex } from './utils';\n\nconst toLowerCase = ( value ) => String( value ).toLowerCase();\nconst isValueEmpty = ( data ) => {\n\tif ( data.source === 'hex' && ! data.hex ) {\n\t\treturn true;\n\t} else if (\n\t\tdata.source === 'hsl' &&\n\t\t( ! data.h || ! data.s || ! data.l )\n\t) {\n\t\treturn true;\n\t} else if (\n\t\tdata.source === 'rgb' &&\n\t\t( ! data.r || ! data.g || ! data.b ) &&\n\t\t( ! data.h || ! data.s || ! data.v || ! data.a ) &&\n\t\t( ! data.h || ! data.s || ! data.l || ! data.a )\n\t) {\n\t\treturn true;\n\t}\n\treturn false;\n};\nconst isValidColor = ( colors ) =>\n\tcolors.hex ? isValidHex( colors.hex ) : simpleCheckForValidColor( colors );\n\n/**\n * Function that creates the new color object\n * from old data and the new value.\n *\n * @param {Object} oldColors The old color object.\n * @param {string} oldColors.hex\n * @param {Object} oldColors.rgb\n * @param {number} oldColors.rgb.r\n * @param {number} oldColors.rgb.g\n * @param {number} oldColors.rgb.b\n * @param {number} oldColors.rgb.a\n * @param {Object} oldColors.hsl\n * @param {number} oldColors.hsl.h\n * @param {number} oldColors.hsl.s\n * @param {number} oldColors.hsl.l\n * @param {number} oldColors.hsl.a\n * @param {string} oldColors.draftHex Same format as oldColors.hex\n * @param {Object} oldColors.draftRgb Same format as oldColors.rgb\n * @param {Object} oldColors.draftHsl Same format as oldColors.hsl\n * @param {Object} data Data containing the new value to update.\n * @param {Object} data.source One of `hex`, `rgb`, `hsl`.\n * @param {string|number} data.value Value to update.\n * @param {string} data.valueKey Depends on `data.source` values:\n *   - when source = `rgb`, valuKey can be `r`, `g`, `b`, or `a`.\n *   - when source = `hsl`, valuKey can be `h`, `s`, `l`, or `a`.\n * @return {Object} A new color object for a specific source. For example:\n * { source: 'rgb', r: 1, g: 2, b:3, a:0 }\n */\nconst dataToColors = ( oldColors, { source, valueKey, value } ) => {\n\tif ( source === 'hex' ) {\n\t\treturn {\n\t\t\tsource,\n\t\t\t[ source ]: value,\n\t\t};\n\t}\n\treturn {\n\t\tsource,\n\t\t...{ ...oldColors[ source ], ...{ [ valueKey ]: value } },\n\t};\n};\n\nexport default class ColorPicker extends Component {\n\tconstructor( { color = '0071a1' } ) {\n\t\tsuper( ...arguments );\n\t\tconst colors = colorToState( color );\n\t\tthis.state = {\n\t\t\t...colors,\n\t\t\tdraftHex: toLowerCase( colors.hex ),\n\t\t\tdraftRgb: colors.rgb,\n\t\t\tdraftHsl: colors.hsl,\n\t\t};\n\t\tthis.commitValues = this.commitValues.bind( this );\n\t\tthis.setDraftValues = this.setDraftValues.bind( this );\n\t\tthis.resetDraftValues = this.resetDraftValues.bind( this );\n\t\tthis.handleInputChange = this.handleInputChange.bind( this );\n\t}\n\n\tcommitValues( data ) {\n\t\tconst { oldHue, onChangeComplete = noop } = this.props;\n\n\t\tif ( isValidColor( data ) ) {\n\t\t\tconst colors = colorToState( data, data.h || oldHue );\n\t\t\tthis.setState(\n\t\t\t\t{\n\t\t\t\t\t...colors,\n\t\t\t\t\tdraftHex: toLowerCase( colors.hex ),\n\t\t\t\t\tdraftHsl: colors.hsl,\n\t\t\t\t\tdraftRgb: colors.rgb,\n\t\t\t\t},\n\t\t\t\tdebounce( partial( onChangeComplete, colors ), 100 )\n\t\t\t);\n\t\t}\n\t}\n\n\tresetDraftValues() {\n\t\tthis.setState( {\n\t\t\tdraftHex: this.state.hex,\n\t\t\tdraftHsl: this.state.hsl,\n\t\t\tdraftRgb: this.state.rgb,\n\t\t} );\n\t}\n\n\tsetDraftValues( data ) {\n\t\tswitch ( data.source ) {\n\t\t\tcase 'hex':\n\t\t\t\tthis.setState( { draftHex: toLowerCase( data.hex ) } );\n\t\t\t\tbreak;\n\t\t\tcase 'rgb':\n\t\t\t\tthis.setState( { draftRgb: data } );\n\t\t\t\tbreak;\n\t\t\tcase 'hsl':\n\t\t\t\tthis.setState( { draftHsl: data } );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\thandleInputChange( data ) {\n\t\tswitch ( data.state ) {\n\t\t\tcase 'reset':\n\t\t\t\tthis.resetDraftValues();\n\t\t\t\tbreak;\n\t\t\tcase 'commit':\n\t\t\t\tconst colors = dataToColors( this.state, data );\n\t\t\t\tif ( ! isValueEmpty( colors ) ) {\n\t\t\t\t\tthis.commitValues( colors );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'draft':\n\t\t\t\tthis.setDraftValues( dataToColors( this.state, data ) );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { className, disableAlpha } = this.props;\n\t\tconst {\n\t\t\tcolor,\n\t\t\thsl,\n\t\t\thsv,\n\t\t\trgb,\n\t\t\tdraftHex,\n\t\t\tdraftHsl,\n\t\t\tdraftRgb,\n\t\t} = this.state;\n\t\tconst classes = classnames( className, {\n\t\t\t'components-color-picker': true,\n\t\t\t'is-alpha-disabled': disableAlpha,\n\t\t\t'is-alpha-enabled': ! disableAlpha,\n\t\t} );\n\n\t\treturn (\n\t\t\t<div className={ classes }>\n\t\t\t\t<div className=\"components-color-picker__saturation\">\n\t\t\t\t\t<Saturation\n\t\t\t\t\t\thsl={ hsl }\n\t\t\t\t\t\thsv={ hsv }\n\t\t\t\t\t\tonChange={ this.commitValues }\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"components-color-picker__body\">\n\t\t\t\t\t<div className=\"components-color-picker__controls\">\n\t\t\t\t\t\t<div className=\"components-color-picker__swatch\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"components-color-picker__active\"\n\t\t\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\t\t\tbackgroundColor:\n\t\t\t\t\t\t\t\t\t\tcolor && color.toRgbString(),\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className=\"components-color-picker__toggles\">\n\t\t\t\t\t\t\t<Hue hsl={ hsl } onChange={ this.commitValues } />\n\t\t\t\t\t\t\t{ disableAlpha ? null : (\n\t\t\t\t\t\t\t\t<Alpha\n\t\t\t\t\t\t\t\t\trgb={ rgb }\n\t\t\t\t\t\t\t\t\thsl={ hsl }\n\t\t\t\t\t\t\t\t\tonChange={ this.commitValues }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<Inputs\n\t\t\t\t\t\trgb={ draftRgb }\n\t\t\t\t\t\thsl={ draftHsl }\n\t\t\t\t\t\thex={ draftHex }\n\t\t\t\t\t\tonChange={ this.handleInputChange }\n\t\t\t\t\t\tdisableAlpha={ disableAlpha }\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n"]}