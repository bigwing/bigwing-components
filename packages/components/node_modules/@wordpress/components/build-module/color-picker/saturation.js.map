{"version":3,"sources":["@wordpress/components/src/color-picker/saturation.js"],"names":["clamp","noop","throttle","__","Component","createRef","TAB","compose","pure","withInstanceId","calculateSaturationChange","Button","KeyboardShortcuts","VisuallyHidden","Saturation","props","fn","data","e","container","saturate","bind","brighten","handleChange","handleMouseDown","handleMouseUp","cancel","unbindEventListeners","amount","hsv","onChange","intSaturation","s","Math","round","change","h","v","a","source","intValue","current","window","addEventListener","event","keyCode","preventDefault","removeEventListener","hsl","instanceId","pointerLocation","top","left","shortcuts","up","pageup","down","pagedown","right","end","home","background","preventKeyEvents"],"mappings":"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","sourcesContent":["/**\n * Parts of this source were derived and modified from react-color,\n * released under the MIT license.\n *\n * https://github.com/casesandberg/react-color/\n *\n * Copyright (c) 2015 Case Sandberg\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * External dependencies\n */\nimport { clamp, noop, throttle } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component, createRef } from '@wordpress/element';\nimport { TAB } from '@wordpress/keycodes';\nimport { compose, pure, withInstanceId } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { calculateSaturationChange } from './utils';\nimport Button from '../button';\nimport KeyboardShortcuts from '../keyboard-shortcuts';\nimport VisuallyHidden from '../visually-hidden';\n\nexport class Saturation extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.throttle = throttle( ( fn, data, e ) => {\n\t\t\tfn( data, e );\n\t\t}, 50 );\n\n\t\tthis.container = createRef();\n\t\tthis.saturate = this.saturate.bind( this );\n\t\tthis.brighten = this.brighten.bind( this );\n\t\tthis.handleChange = this.handleChange.bind( this );\n\t\tthis.handleMouseDown = this.handleMouseDown.bind( this );\n\t\tthis.handleMouseUp = this.handleMouseUp.bind( this );\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.throttle.cancel();\n\t\tthis.unbindEventListeners();\n\t}\n\n\tsaturate( amount = 0.01 ) {\n\t\tconst { hsv, onChange = noop } = this.props;\n\t\tconst intSaturation = clamp(\n\t\t\thsv.s + Math.round( amount * 100 ),\n\t\t\t0,\n\t\t\t100\n\t\t);\n\t\tconst change = {\n\t\t\th: hsv.h,\n\t\t\ts: intSaturation,\n\t\t\tv: hsv.v,\n\t\t\ta: hsv.a,\n\t\t\tsource: 'rgb',\n\t\t};\n\n\t\tonChange( change );\n\t}\n\n\tbrighten( amount = 0.01 ) {\n\t\tconst { hsv, onChange = noop } = this.props;\n\t\tconst intValue = clamp( hsv.v + Math.round( amount * 100 ), 0, 100 );\n\t\tconst change = {\n\t\t\th: hsv.h,\n\t\t\ts: hsv.s,\n\t\t\tv: intValue,\n\t\t\ta: hsv.a,\n\t\t\tsource: 'rgb',\n\t\t};\n\n\t\tonChange( change );\n\t}\n\n\thandleChange( e ) {\n\t\tconst { onChange = noop } = this.props;\n\t\tconst change = calculateSaturationChange(\n\t\t\te,\n\t\t\tthis.props,\n\t\t\tthis.container.current\n\t\t);\n\t\tthis.throttle( onChange, change, e );\n\t}\n\n\thandleMouseDown( e ) {\n\t\tthis.handleChange( e );\n\t\twindow.addEventListener( 'mousemove', this.handleChange );\n\t\twindow.addEventListener( 'mouseup', this.handleMouseUp );\n\t}\n\n\thandleMouseUp() {\n\t\tthis.unbindEventListeners();\n\t}\n\n\tpreventKeyEvents( event ) {\n\t\tif ( event.keyCode === TAB ) {\n\t\t\treturn;\n\t\t}\n\t\tevent.preventDefault();\n\t}\n\n\tunbindEventListeners() {\n\t\twindow.removeEventListener( 'mousemove', this.handleChange );\n\t\twindow.removeEventListener( 'mouseup', this.handleMouseUp );\n\t}\n\n\trender() {\n\t\tconst { hsv, hsl, instanceId } = this.props;\n\t\tconst pointerLocation = {\n\t\t\ttop: `${ -hsv.v + 100 }%`,\n\t\t\tleft: `${ hsv.s }%`,\n\t\t};\n\t\tconst shortcuts = {\n\t\t\tup: () => this.brighten(),\n\t\t\t'shift+up': () => this.brighten( 0.1 ),\n\t\t\tpageup: () => this.brighten( 1 ),\n\t\t\tdown: () => this.brighten( -0.01 ),\n\t\t\t'shift+down': () => this.brighten( -0.1 ),\n\t\t\tpagedown: () => this.brighten( -1 ),\n\t\t\tright: () => this.saturate(),\n\t\t\t'shift+right': () => this.saturate( 0.1 ),\n\t\t\tend: () => this.saturate( 1 ),\n\t\t\tleft: () => this.saturate( -0.01 ),\n\t\t\t'shift+left': () => this.saturate( -0.1 ),\n\t\t\thome: () => this.saturate( -1 ),\n\t\t};\n\n\t\t/* eslint-disable jsx-a11y/no-noninteractive-element-interactions */\n\t\treturn (\n\t\t\t<KeyboardShortcuts shortcuts={ shortcuts }>\n\t\t\t\t<div\n\t\t\t\t\tstyle={ { background: `hsl(${ hsl.h },100%, 50%)` } }\n\t\t\t\t\tclassName=\"components-color-picker__saturation-color\"\n\t\t\t\t\tref={ this.container }\n\t\t\t\t\tonMouseDown={ this.handleMouseDown }\n\t\t\t\t\tonTouchMove={ this.handleChange }\n\t\t\t\t\tonTouchStart={ this.handleChange }\n\t\t\t\t\trole=\"application\"\n\t\t\t\t>\n\t\t\t\t\t<div className=\"components-color-picker__saturation-white\" />\n\t\t\t\t\t<div className=\"components-color-picker__saturation-black\" />\n\t\t\t\t\t<Button\n\t\t\t\t\t\taria-label={ __( 'Choose a shade' ) }\n\t\t\t\t\t\taria-describedby={ `color-picker-saturation-${ instanceId }` }\n\t\t\t\t\t\tclassName=\"components-color-picker__saturation-pointer\"\n\t\t\t\t\t\tstyle={ pointerLocation }\n\t\t\t\t\t\tonKeyDown={ this.preventKeyEvents }\n\t\t\t\t\t/>\n\t\t\t\t\t<VisuallyHidden\n\t\t\t\t\t\tid={ `color-picker-saturation-${ instanceId }` }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t'Use your arrow keys to change the base color. Move up to lighten the color, down to darken, left to decrease saturation, and right to increase saturation.'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</VisuallyHidden>\n\t\t\t\t</div>\n\t\t\t</KeyboardShortcuts>\n\t\t);\n\t\t/* eslint-enable jsx-a11y/no-noninteractive-element-interactions */\n\t}\n}\n\nexport default compose( pure, withInstanceId )( Saturation );\n"]}