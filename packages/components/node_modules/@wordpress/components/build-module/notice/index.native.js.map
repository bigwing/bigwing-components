{"version":3,"sources":["@wordpress/components/src/notice/index.native.js"],"names":["Animated","Easing","Text","TouchableWithoutFeedback","View","Dimensions","Platform","BlurView","useEffect","useRef","useState","usePreferredColorSchemeStyle","styles","Notice","onNoticeHidden","content","id","get","width","setWidth","visible","setVisible","animationValue","Value","current","timer","isIOS","OS","onDimensionsChange","addEventListener","removeEventListener","startAnimation","clearTimeout","onHide","timing","toValue","duration","useNativeDriver","easing","out","quad","start","setTimeout","noticeSolidStyles","noticeSolid","noticeSolidDark","textStyles","text","textDark","notice","transform","translateY","interpolate","inputRange","outputRange","noticeContent","blurBackground"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport {\n\tAnimated,\n\tEasing,\n\tText,\n\tTouchableWithoutFeedback,\n\tView,\n\tDimensions,\n\tPlatform,\n} from 'react-native';\nimport { BlurView } from '@react-native-community/blur';\n\n/**\n * WordPress dependencies\n */\nimport { useEffect, useRef, useState } from '@wordpress/element';\nimport { usePreferredColorSchemeStyle } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport styles from './style.scss';\n\nconst Notice = ( { onNoticeHidden, content, id } ) => {\n\tconst [ width, setWidth ] = useState( Dimensions.get( 'window' ).width );\n\tconst [ visible, setVisible ] = useState( true );\n\n\tconst animationValue = useRef( new Animated.Value( 0 ) ).current;\n\tconst timer = useRef( null );\n\tconst isIOS = Platform.OS === 'ios';\n\n\tconst onDimensionsChange = () => {\n\t\tsetWidth( Dimensions.get( 'window' ).width );\n\t};\n\n\tuseEffect( () => {\n\t\tDimensions.addEventListener( 'change', onDimensionsChange );\n\t\treturn () => {\n\t\t\tDimensions.removeEventListener( 'change', onDimensionsChange );\n\t\t};\n\t}, [] );\n\n\tuseEffect( () => {\n\t\tstartAnimation();\n\t\treturn () => {\n\t\t\tclearTimeout( timer?.current );\n\t\t};\n\t}, [ visible, id ] );\n\n\tconst onHide = () => {\n\t\tsetVisible( false );\n\t};\n\n\tconst startAnimation = () => {\n\t\tAnimated.timing( animationValue, {\n\t\t\ttoValue: visible ? 1 : 0,\n\t\t\tduration: visible ? 300 : 150,\n\t\t\tuseNativeDriver: true,\n\t\t\teasing: Easing.out( Easing.quad ),\n\t\t} ).start( () => {\n\t\t\tif ( visible && onNoticeHidden ) {\n\t\t\t\ttimer.current = setTimeout( () => {\n\t\t\t\t\tonHide();\n\t\t\t\t}, 3000 );\n\t\t\t}\n\n\t\t\tif ( ! visible && onNoticeHidden ) {\n\t\t\t\tonNoticeHidden( id );\n\t\t\t}\n\t\t} );\n\t};\n\n\tconst noticeSolidStyles = usePreferredColorSchemeStyle(\n\t\tstyles.noticeSolid,\n\t\tstyles.noticeSolidDark\n\t);\n\n\tconst textStyles = usePreferredColorSchemeStyle(\n\t\tstyles.text,\n\t\tstyles.textDark\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<Animated.View\n\t\t\t\tstyle={ [\n\t\t\t\t\tstyles.notice,\n\t\t\t\t\t! isIOS && noticeSolidStyles,\n\t\t\t\t\t{\n\t\t\t\t\t\twidth,\n\t\t\t\t\t\ttransform: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttranslateY: animationValue.interpolate( {\n\t\t\t\t\t\t\t\t\tinputRange: [ 0, 1 ],\n\t\t\t\t\t\t\t\t\toutputRange: [ -24, 0 ],\n\t\t\t\t\t\t\t\t} ),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t] }\n\t\t\t>\n\t\t\t\t<TouchableWithoutFeedback onPress={ onHide }>\n\t\t\t\t\t<View style={ styles.noticeContent }>\n\t\t\t\t\t\t<Text style={ textStyles }>{ content }</Text>\n\t\t\t\t\t</View>\n\t\t\t\t</TouchableWithoutFeedback>\n\t\t\t\t{ isIOS && (\n\t\t\t\t\t<BlurView\n\t\t\t\t\t\tstyle={ styles.blurBackground }\n\t\t\t\t\t\tblurType=\"prominent\"\n\t\t\t\t\t\tblurAmount={ 10 }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</Animated.View>\n\t\t</>\n\t);\n};\n\nexport default Notice;\n"]}