{"version":3,"sources":["@wordpress/components/src/mobile/color-settings/index.native.js"],"names":["View","Text","__","useState","useEffect","usePreferredColorSchemeStyle","ColorControl","PanelBody","ColorPicker","ColorPalette","ColorIndicator","CustomGradientPicker","NavigationHeader","SegmentedControls","colorsUtils","performLayoutAnimation","styles","ColorSettings","label","onColorChange","onGradientChange","colorValue","onReplaceSubsheet","shouldEnableBottomSheetScroll","shouldDisableBottomSheetMaxHeight","isBottomSheetContentScrolling","onCloseBottomSheet","onHardwareButtonPress","defaultSettings","currentValue","setCurrentValue","isCustomScreen","setIsCustomScreen","isCustomGradientScreen","setIsCustomGradientScreen","segments","subsheets","isGradient","isGradientColor","selectedSegmentIndex","currentSegment","setCurrentSegment","isSolidSegment","isCustomGadientShown","horizontalSeparatorStyle","horizontalSeparator","horizontalSeparatorDark","onCustomScreenToggle","onCustomGradientScreenToggle","afterHardwareButtonPress","shouldShow","onCustomPress","setColor","color","getFooter","indexOf","colorIndicator","footer","flex","selectColorText"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { View, Text } from 'react-native';\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useState, useEffect } from '@wordpress/element';\nimport { usePreferredColorSchemeStyle } from '@wordpress/compose';\nimport { ColorControl, PanelBody } from '@wordpress/components';\n/**\n * Internal dependencies\n */\nimport ColorPicker from '../../color-picker';\nimport ColorPalette from '../../color-palette';\nimport ColorIndicator from '../../color-indicator';\nimport CustomGradientPicker from '../../custom-gradient-picker';\nimport NavigationHeader from '../bottom-sheet/navigation-header';\nimport SegmentedControls from '../segmented-control';\nimport { colorsUtils } from './utils';\nimport { performLayoutAnimation } from '../layout-animation';\n\nimport styles from './style.scss';\n\nfunction ColorSettings( {\n\tlabel,\n\tonColorChange,\n\tonGradientChange,\n\tcolorValue,\n\tonReplaceSubsheet,\n\tshouldEnableBottomSheetScroll,\n\tshouldDisableBottomSheetMaxHeight,\n\tisBottomSheetContentScrolling,\n\tonCloseBottomSheet,\n\tonHardwareButtonPress,\n\tdefaultSettings,\n} ) {\n\tconst [ currentValue, setCurrentValue ] = useState( colorValue );\n\tconst [ isCustomScreen, setIsCustomScreen ] = useState( false );\n\tconst [ isCustomGradientScreen, setIsCustomGradientScreen ] = useState(\n\t\tfalse\n\t);\n\n\tconst { segments, subsheets, isGradient } = colorsUtils;\n\tconst isGradientColor = isGradient( currentValue );\n\tconst selectedSegmentIndex = isGradientColor ? 1 : 0;\n\n\tconst [ currentSegment, setCurrentSegment ] = useState(\n\t\tsegments[ selectedSegmentIndex ]\n\t);\n\n\tconst isSolidSegment = currentSegment === segments[ 0 ];\n\tconst isCustomGadientShown = ! isSolidSegment && isGradientColor;\n\n\tconst horizontalSeparatorStyle = usePreferredColorSchemeStyle(\n\t\tstyles.horizontalSeparator,\n\t\tstyles.horizontalSeparatorDark\n\t);\n\n\tuseEffect( () => {\n\t\tonHardwareButtonPress( () => {\n\t\t\tif ( isCustomScreen ) {\n\t\t\t\tonCustomScreenToggle( false );\n\t\t\t} else if ( isCustomGradientScreen ) {\n\t\t\t\tonCustomGradientScreenToggle( false );\n\t\t\t} else {\n\t\t\t\tonReplaceSubsheet(\n\t\t\t\t\tsubsheets[ 0 ],\n\t\t\t\t\t{},\n\t\t\t\t\tafterHardwareButtonPress()\n\t\t\t\t);\n\t\t\t}\n\t\t} );\n\t}, [ isCustomScreen, isCustomGradientScreen ] );\n\n\tuseEffect( () => {\n\t\tperformLayoutAnimation();\n\t}, [ isCustomGadientShown ] );\n\n\tuseEffect( () => {\n\t\tsetCurrentSegment( segments[ selectedSegmentIndex ] );\n\t\tshouldDisableBottomSheetMaxHeight( true );\n\t\tonCloseBottomSheet( null );\n\t}, [] );\n\n\tfunction afterHardwareButtonPress() {\n\t\tonHardwareButtonPress( null );\n\t\tshouldDisableBottomSheetMaxHeight( true );\n\t}\n\n\tfunction onCustomScreenToggle( shouldShow ) {\n\t\tperformLayoutAnimation();\n\t\tsetIsCustomScreen( shouldShow );\n\t}\n\n\tfunction onCustomGradientScreenToggle( shouldShow ) {\n\t\tperformLayoutAnimation();\n\t\tsetIsCustomGradientScreen( shouldShow );\n\t}\n\n\tfunction onCustomPress() {\n\t\tif ( isSolidSegment ) {\n\t\t\tonCustomScreenToggle( true );\n\t\t} else {\n\t\t\tonCustomGradientScreenToggle( true );\n\t\t}\n\t}\n\n\tfunction setColor( color ) {\n\t\tsetCurrentValue( color );\n\t\tif ( isSolidSegment && onColorChange && onGradientChange ) {\n\t\t\tonColorChange( color );\n\t\t\tonGradientChange( '' );\n\t\t} else if ( isSolidSegment && onColorChange ) {\n\t\t\tonColorChange( color );\n\t\t} else if ( ! isSolidSegment && onGradientChange ) {\n\t\t\tonGradientChange( color );\n\t\t\tonColorChange( '' );\n\t\t}\n\t}\n\n\tfunction getFooter() {\n\t\tif ( onGradientChange ) {\n\t\t\treturn (\n\t\t\t\t<SegmentedControls\n\t\t\t\t\tsegments={ segments }\n\t\t\t\t\tsegmentHandler={ setCurrentSegment }\n\t\t\t\t\tselectedIndex={ segments.indexOf( currentSegment ) }\n\t\t\t\t\taddonLeft={\n\t\t\t\t\t\tcurrentValue && (\n\t\t\t\t\t\t\t<ColorIndicator\n\t\t\t\t\t\t\t\tcolor={ currentValue }\n\t\t\t\t\t\t\t\tstyle={ styles.colorIndicator }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<View style={ styles.footer }>\n\t\t\t\t<View style={ styles.flex }>\n\t\t\t\t\t{ currentValue && (\n\t\t\t\t\t\t<ColorIndicator\n\t\t\t\t\t\t\tcolor={ currentValue }\n\t\t\t\t\t\t\tstyle={ styles.colorIndicator }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</View>\n\t\t\t\t<Text\n\t\t\t\t\tstyle={ styles.selectColorText }\n\t\t\t\t\tmaxFontSizeMultiplier={ 2 }\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Select a color' ) }\n\t\t\t\t</Text>\n\t\t\t\t<View style={ styles.flex } />\n\t\t\t</View>\n\t\t);\n\t}\n\n\treturn (\n\t\t<View renderToHardwareTextureAndroid>\n\t\t\t{ isCustomScreen && (\n\t\t\t\t<View>\n\t\t\t\t\t<ColorPicker\n\t\t\t\t\t\tshouldEnableBottomSheetScroll={\n\t\t\t\t\t\t\tshouldEnableBottomSheetScroll\n\t\t\t\t\t\t}\n\t\t\t\t\t\tshouldDisableBottomSheetMaxHeight={\n\t\t\t\t\t\t\tshouldDisableBottomSheetMaxHeight\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetColor={ setColor }\n\t\t\t\t\t\tactiveColor={ currentValue }\n\t\t\t\t\t\tisGradientColor={ isGradientColor }\n\t\t\t\t\t\tonNavigationBack={ () => onCustomScreenToggle( false ) }\n\t\t\t\t\t\tonCloseBottomSheet={ onCloseBottomSheet }\n\t\t\t\t\t\tisBottomSheetContentScrolling={\n\t\t\t\t\t\t\tisBottomSheetContentScrolling\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</View>\n\t\t\t) }\n\t\t\t{ ! isCustomScreen && ! isCustomGradientScreen && (\n\t\t\t\t<View>\n\t\t\t\t\t<NavigationHeader\n\t\t\t\t\t\tscreen={ label }\n\t\t\t\t\t\tleftButtonOnPress={ () =>\n\t\t\t\t\t\t\tonReplaceSubsheet( subsheets[ 0 ] )\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<ColorPalette\n\t\t\t\t\t\tsetColor={ setColor }\n\t\t\t\t\t\tactiveColor={ currentValue }\n\t\t\t\t\t\tisGradientColor={ isGradientColor }\n\t\t\t\t\t\tcurrentSegment={ currentSegment }\n\t\t\t\t\t\tisCustomScreen={ isCustomScreen }\n\t\t\t\t\t\tonCustomPress={ onCustomPress }\n\t\t\t\t\t\tshouldEnableBottomSheetScroll={\n\t\t\t\t\t\t\tshouldEnableBottomSheetScroll\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdefaultSettings={ defaultSettings }\n\t\t\t\t\t/>\n\t\t\t\t\t{ isCustomGadientShown && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<View style={ horizontalSeparatorStyle } />\n\t\t\t\t\t\t\t<PanelBody>\n\t\t\t\t\t\t\t\t<ColorControl\n\t\t\t\t\t\t\t\t\tlabel={ __( 'Customize Gradient' ) }\n\t\t\t\t\t\t\t\t\tonPress={ () =>\n\t\t\t\t\t\t\t\t\t\tonCustomGradientScreenToggle( true )\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\twithColorIndicator={ false }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</PanelBody>\n\t\t\t\t\t\t</>\n\t\t\t\t\t) }\n\t\t\t\t\t<View style={ horizontalSeparatorStyle } />\n\t\t\t\t\t{ getFooter() }\n\t\t\t\t</View>\n\t\t\t) }\n\t\t\t{ isCustomGradientScreen && (\n\t\t\t\t<View>\n\t\t\t\t\t<NavigationHeader\n\t\t\t\t\t\tscreen={ __( 'Customize Gradient' ) }\n\t\t\t\t\t\tleftButtonOnPress={ () =>\n\t\t\t\t\t\t\tonCustomGradientScreenToggle( false )\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<CustomGradientPicker\n\t\t\t\t\t\tsetColor={ setColor }\n\t\t\t\t\t\tcurrentValue={ currentValue }\n\t\t\t\t\t\tisGradientColor={ isGradientColor }\n\t\t\t\t\t/>\n\t\t\t\t</View>\n\t\t\t) }\n\t\t</View>\n\t);\n}\n\nexport default ColorSettings;\n"]}