{"version":3,"sources":["@wordpress/components/src/mobile/bottom-sheet/stepper-cell/index.native.js"],"names":["AccessibilityInfo","View","Platform","__","sprintf","Component","Cell","Stepper","styles","STEP_DELAY","DEFAULT_STEP","BottomSheetStepperCell","props","announceValue","bind","onDecrementValue","onDecrementValuePressIn","onIncrementValue","onIncrementValuePressIn","onPressOut","startPressInterval","clearTimeout","timeout","clearInterval","interval","timeoutAnnounceValue","step","max","onChange","value","newValue","min","setTimeout","callback","speed","counter","setInterval","label","OS","announceForAccessibility","icon","separatorType","isMinValue","isMaxValue","labelStyle","cellLabel","cellLabelNoIcon","accessibilityLabel","name","event","nativeEvent","actionName","cellContainerStyles","cellRowStyles","defaultProps"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { AccessibilityInfo, View, Platform } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { Component } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport Cell from '../cell';\nimport Stepper from './stepper';\nimport styles from './style.scss';\n\nconst STEP_DELAY = 200;\nconst DEFAULT_STEP = 1;\n\nclass BottomSheetStepperCell extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.announceValue = this.announceValue.bind( this );\n\t\tthis.onDecrementValue = this.onDecrementValue.bind( this );\n\t\tthis.onDecrementValuePressIn = this.onDecrementValuePressIn.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.onIncrementValue = this.onIncrementValue.bind( this );\n\t\tthis.onIncrementValuePressIn = this.onIncrementValuePressIn.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.onPressOut = this.onPressOut.bind( this );\n\t\tthis.startPressInterval = this.startPressInterval.bind( this );\n\t}\n\n\tcomponentWillUnmount() {\n\t\tclearTimeout( this.timeout );\n\t\tclearInterval( this.interval );\n\t\tclearTimeout( this.timeoutAnnounceValue );\n\t}\n\n\tonIncrementValue() {\n\t\tconst { step, max, onChange, value } = this.props;\n\t\tconst newValue = value + step;\n\n\t\tif ( newValue <= max ) {\n\t\t\tonChange( newValue );\n\t\t\tthis.announceValue( newValue );\n\t\t}\n\t}\n\n\tonDecrementValue() {\n\t\tconst { step, min, onChange, value } = this.props;\n\t\tconst newValue = value - step;\n\n\t\tif ( newValue >= min ) {\n\t\t\tonChange( newValue );\n\t\t\tthis.announceValue( newValue );\n\t\t}\n\t}\n\n\tonIncrementValuePressIn() {\n\t\tthis.onIncrementValue();\n\t\tthis.timeout = setTimeout( () => {\n\t\t\tthis.startPressInterval( this.onIncrementValue );\n\t\t}, 500 );\n\t}\n\n\tonDecrementValuePressIn() {\n\t\tthis.onDecrementValue();\n\t\tthis.timeout = setTimeout( () => {\n\t\t\tthis.startPressInterval( this.onDecrementValue );\n\t\t}, 500 );\n\t}\n\n\tonPressOut() {\n\t\tclearTimeout( this.timeout );\n\t\tclearInterval( this.interval );\n\t}\n\n\tstartPressInterval( callback, speed = STEP_DELAY ) {\n\t\tlet counter = 0;\n\t\tthis.interval = setInterval( () => {\n\t\t\tcallback();\n\t\t\tcounter += 1;\n\n\t\t\tif ( counter === 10 ) {\n\t\t\t\tclearInterval( this.interval );\n\t\t\t\tthis.startPressInterval( callback, speed / 2 );\n\t\t\t}\n\t\t}, speed );\n\t}\n\n\tannounceValue( value ) {\n\t\tconst { label } = this.props;\n\n\t\tif ( Platform.OS === 'ios' ) {\n\t\t\t// On Android it triggers the accessibilityLabel with the value change\n\t\t\tclearTimeout( this.timeoutAnnounceValue );\n\t\t\tthis.timeoutAnnounceValue = setTimeout( () => {\n\t\t\t\tAccessibilityInfo.announceForAccessibility(\n\t\t\t\t\t`${ value } ${ label }`\n\t\t\t\t);\n\t\t\t}, 300 );\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { label, icon, min, max, value, separatorType } = this.props;\n\t\tconst isMinValue = value === min;\n\t\tconst isMaxValue = value === max;\n\t\tconst labelStyle = [\n\t\t\tstyles.cellLabel,\n\t\t\t! icon ? styles.cellLabelNoIcon : {},\n\t\t];\n\t\tconst accessibilityLabel = sprintf(\n\t\t\t/* translators: accessibility text. Inform about current value. %1$s: Control label %2$s: Current value. */\n\t\t\t__( '%1$s. Current value is %2$s' ),\n\t\t\tlabel,\n\t\t\tvalue\n\t\t);\n\n\t\treturn (\n\t\t\t<View\n\t\t\t\taccessible={ true }\n\t\t\t\taccessibilityRole=\"adjustable\"\n\t\t\t\taccessibilityLabel={ accessibilityLabel }\n\t\t\t\taccessibilityActions={ [\n\t\t\t\t\t{ name: 'increment' },\n\t\t\t\t\t{ name: 'decrement' },\n\t\t\t\t] }\n\t\t\t\tonAccessibilityAction={ ( event ) => {\n\t\t\t\t\tswitch ( event.nativeEvent.actionName ) {\n\t\t\t\t\t\tcase 'increment':\n\t\t\t\t\t\t\tthis.onIncrementValue();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'decrement':\n\t\t\t\t\t\t\tthis.onDecrementValue();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t<Cell\n\t\t\t\t\taccessibilityRole=\"none\"\n\t\t\t\t\taccessible={ false }\n\t\t\t\t\tcellContainerStyle={ styles.cellContainerStyles }\n\t\t\t\t\tcellRowContainerStyle={ styles.cellRowStyles }\n\t\t\t\t\tdisabled={ true }\n\t\t\t\t\teditable={ false }\n\t\t\t\t\ticon={ icon }\n\t\t\t\t\tlabel={ label }\n\t\t\t\t\tlabelStyle={ labelStyle }\n\t\t\t\t\tleftAlign={ true }\n\t\t\t\t\tseparatorType={ separatorType }\n\t\t\t\t>\n\t\t\t\t\t<Stepper\n\t\t\t\t\t\tisMaxValue={ isMaxValue }\n\t\t\t\t\t\tisMinValue={ isMinValue }\n\t\t\t\t\t\tonPressInDecrement={ this.onDecrementValuePressIn }\n\t\t\t\t\t\tonPressInIncrement={ this.onIncrementValuePressIn }\n\t\t\t\t\t\tonPressOut={ this.onPressOut }\n\t\t\t\t\t\tvalue={ value }\n\t\t\t\t\t/>\n\t\t\t\t</Cell>\n\t\t\t</View>\n\t\t);\n\t}\n}\n\nBottomSheetStepperCell.defaultProps = {\n\tstep: DEFAULT_STEP,\n};\n\nexport default BottomSheetStepperCell;\n"]}