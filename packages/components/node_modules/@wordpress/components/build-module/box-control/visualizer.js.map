{"version":3,"sources":["@wordpress/components/src/box-control/visualizer.js"],"names":["useRef","useEffect","useState","Container","TopView","RightView","BottomView","LeftView","DEFAULT_VALUES","DEFAULT_VISUALIZER_VALUES","BoxControlVisualizer","children","showValues","values","valuesProp","props","isPositionAbsolute","Sides","top","right","bottom","left","Top","isVisible","value","height","animationProps","useSideAnimation","isActive","Right","width","Bottom","Left","setIsActive","valueRef","timeoutRef","clearTimer","current","window","clearTimeout","setTimeout"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useRef, useEffect, useState } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport {\n\tContainer,\n\tTopView,\n\tRightView,\n\tBottomView,\n\tLeftView,\n} from './styles/box-control-visualizer-styles';\nimport { DEFAULT_VALUES, DEFAULT_VISUALIZER_VALUES } from './utils';\n\nexport default function BoxControlVisualizer( {\n\tchildren,\n\tshowValues = DEFAULT_VISUALIZER_VALUES,\n\tvalues: valuesProp = DEFAULT_VALUES,\n\t...props\n} ) {\n\tconst isPositionAbsolute = ! children;\n\treturn (\n\t\t<Container\n\t\t\t{ ...props }\n\t\t\tisPositionAbsolute={ isPositionAbsolute }\n\t\t\taria-hidden=\"true\"\n\t\t>\n\t\t\t<Sides showValues={ showValues } values={ valuesProp } />\n\t\t\t{ children }\n\t\t</Container>\n\t);\n}\n\nfunction Sides( { showValues = DEFAULT_VISUALIZER_VALUES, values } ) {\n\tconst { top, right, bottom, left } = values;\n\n\treturn (\n\t\t<>\n\t\t\t<Top isVisible={ showValues.top } value={ top } />\n\t\t\t<Right isVisible={ showValues.right } value={ right } />\n\t\t\t<Bottom isVisible={ showValues.bottom } value={ bottom } />\n\t\t\t<Left isVisible={ showValues.left } value={ left } />\n\t\t</>\n\t);\n}\n\nfunction Top( { isVisible = false, value } ) {\n\tconst height = value;\n\tconst animationProps = useSideAnimation( height );\n\tconst isActive = animationProps.isActive || isVisible;\n\n\treturn <TopView isActive={ isActive } style={ { height } } />;\n}\n\nfunction Right( { isVisible = false, value } ) {\n\tconst width = value;\n\tconst animationProps = useSideAnimation( width );\n\tconst isActive = animationProps.isActive || isVisible;\n\n\treturn <RightView isActive={ isActive } style={ { width } } />;\n}\n\nfunction Bottom( { isVisible = false, value } ) {\n\tconst height = value;\n\tconst animationProps = useSideAnimation( height );\n\tconst isActive = animationProps.isActive || isVisible;\n\n\treturn <BottomView isActive={ isActive } style={ { height } } />;\n}\n\nfunction Left( { isVisible = false, value } ) {\n\tconst width = value;\n\tconst animationProps = useSideAnimation( width );\n\tconst isActive = animationProps.isActive || isVisible;\n\n\treturn <LeftView isActive={ isActive } style={ { width } } />;\n}\n\n/**\n * Custom hook that renders the \"flash\" animation whenever the value changes.\n *\n * @param {string} value Value of (box) side.\n */\nfunction useSideAnimation( value ) {\n\tconst [ isActive, setIsActive ] = useState( false );\n\tconst valueRef = useRef( value );\n\tconst timeoutRef = useRef();\n\n\tconst clearTimer = () => {\n\t\tif ( timeoutRef.current ) {\n\t\t\twindow.clearTimeout( timeoutRef.current );\n\t\t}\n\t};\n\n\tuseEffect( () => {\n\t\tif ( value !== valueRef.current ) {\n\t\t\tsetIsActive( true );\n\t\t\tvalueRef.current = value;\n\n\t\t\tclearTimer();\n\n\t\t\ttimeoutRef.current = setTimeout( () => {\n\t\t\t\tsetIsActive( false );\n\t\t\t}, 400 );\n\t\t}\n\n\t\treturn () => clearTimer();\n\t}, [ value ] );\n\n\treturn {\n\t\tisActive,\n\t};\n}\n"]}