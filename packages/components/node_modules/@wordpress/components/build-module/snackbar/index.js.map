{"version":3,"sources":["@wordpress/components/src/snackbar/index.js"],"names":["noop","classnames","speak","useEffect","forwardRef","renderToString","__","warning","Button","NOTICE_TIMEOUT","useSpokenMessage","message","politeness","spokenMessage","Snackbar","ref","className","children","actions","onRemove","timeoutHandle","setTimeout","clearTimeout","classes","length","map","index","label","onClick","url","event","stopPropagation"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { noop } from 'lodash';\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { speak } from '@wordpress/a11y';\nimport { useEffect, forwardRef, renderToString } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport warning from '@wordpress/warning';\n\n/**\n * Internal dependencies\n */\nimport { Button } from '../';\n\nconst NOTICE_TIMEOUT = 10000;\n\n/** @typedef {import('@wordpress/element').WPElement} WPElement */\n\n/**\n * Custom hook which announces the message with the given politeness, if a\n * valid message is provided.\n *\n * @param {string|WPElement}     [message]  Message to announce.\n * @param {'polite'|'assertive'} politeness Politeness to announce.\n */\nfunction useSpokenMessage( message, politeness ) {\n\tconst spokenMessage =\n\t\ttypeof message === 'string' ? message : renderToString( message );\n\n\tuseEffect( () => {\n\t\tif ( spokenMessage ) {\n\t\t\tspeak( spokenMessage, politeness );\n\t\t}\n\t}, [ spokenMessage, politeness ] );\n}\n\nfunction Snackbar(\n\t{\n\t\tclassName,\n\t\tchildren,\n\t\tspokenMessage = children,\n\t\tpoliteness = 'polite',\n\t\tactions = [],\n\t\tonRemove = noop,\n\t},\n\tref\n) {\n\tuseSpokenMessage( spokenMessage, politeness );\n\tuseEffect( () => {\n\t\tconst timeoutHandle = setTimeout( () => {\n\t\t\tonRemove();\n\t\t}, NOTICE_TIMEOUT );\n\n\t\treturn () => clearTimeout( timeoutHandle );\n\t}, [] );\n\n\tconst classes = classnames( className, 'components-snackbar' );\n\tif ( actions && actions.length > 1 ) {\n\t\t// we need to inform developers that snackbar only accepts 1 action\n\t\twarning(\n\t\t\t'Snackbar can only have 1 action, use Notice if your message require many messages'\n\t\t);\n\t\t// return first element only while keeping it inside an array\n\t\tactions = [ actions[ 0 ] ];\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tref={ ref }\n\t\t\tclassName={ classes }\n\t\t\tonClick={ onRemove }\n\t\t\ttabIndex=\"0\"\n\t\t\trole=\"button\"\n\t\t\tonKeyPress={ onRemove }\n\t\t\taria-label={ __( 'Dismiss this notice' ) }\n\t\t>\n\t\t\t<div className=\"components-snackbar__content\">\n\t\t\t\t{ children }\n\t\t\t\t{ actions.map( ( { label, onClick, url }, index ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tkey={ index }\n\t\t\t\t\t\t\thref={ url }\n\t\t\t\t\t\t\tisTertiary\n\t\t\t\t\t\t\tonClick={ ( event ) => {\n\t\t\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\t\t\tif ( onClick ) {\n\t\t\t\t\t\t\t\t\tonClick( event );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tclassName=\"components-snackbar__action\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ label }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t);\n\t\t\t\t} ) }\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default forwardRef( Snackbar );\n"]}