!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ReakitUtils={},e.React)}(this,(function(e,t){"use strict";function n(e,t){return"matches"in e?e.matches(t):"msMatchesSelector"in e?e.msMatchesSelector(t):e.webkitMatchesSelector(t)}function r(e,t){if("closest"in e)return e.closest(t);do{if(n(e,t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null}function o(e,t){return e===t||e.contains(t)}function i(e){return e?e.ownerDocument||e:window.document}function u(e,t,n){if("function"==typeof Event)return new Event(t,n);var r=i(e).createEvent("Event");return r.initEvent(t,null==n?void 0:n.bubbles,null==n?void 0:n.cancelable),r}function c(e){return i(e).activeElement}function a(e){var t=c(e);if(!t)return!1;if(t===e)return!0;var n=t.getAttribute("aria-activedescendant");return!!n&&n===e.id}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function d(e,t,n){return void 0===n&&(n={}),"function"==typeof FocusEvent?new FocusEvent(t,n):u(e,t,n)}function y(e){return i(e).defaultView||window}var p="undefined"!=typeof window&&"msCrypto"in window;var g=["button","color","file","image","reset","submit"];function h(e){return"object"==typeof e&&null!=e}function m(e,t){return-1===t?e:[].concat(e.slice(0,t),e.slice(t+1))}var O="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false'])";function E(e){return n(e,O)&&function(e){var t=e;return t.offsetWidth>0||t.offsetHeight>0||e.getClientRects().length>0}(e)}function w(e){return E(e)&&!function(e){return parseInt(e.getAttribute("tabindex")||"0",10)<0}(e)}function j(e){var t=Array.from(e.querySelectorAll(O));return t.unshift(e),t.filter(E)}function A(e,t){var n=Array.from(e.querySelectorAll(O)),r=n.filter(w);return w(e)&&r.unshift(e),!r.length&&t?n:r}function S(e,t){void 0===t&&(t=null),e&&("function"==typeof e?e(t):e.current=t)}var T="undefined"==typeof window?t.useEffect:t.useLayoutEffect;e.applyState=function(e,t){return function(e){return"function"==typeof e}(e)?e(t):e},e.closest=r,e.contains=o,e.createEvent=u,e.createOnKeyDown=function(e){var t=void 0===e?{}:e,n=t.keyMap,r=t.onKey,o=t.stopPropagation,i=t.onKeyDown,u=t.shouldKeyDown,c=void 0===u?function(){return!0}:u,a=t.preventDefault,f=void 0===a||a;return function(e){if(n){var t,u="function"==typeof n?n(e):n,a="function"==typeof f?f(e):f,l="function"==typeof o?o(e):o;if(e.key in u){var s=u[e.key];if("function"==typeof s&&c(e))return a&&e.preventDefault(),l&&e.stopPropagation(),r&&r(e),void s(e)}if(i&&"current"in i)null===(t=i.current)||void 0===t||t.call(i,e);else null==i||i(e)}}},e.ensureFocus=function(e,t){var n=void 0===t?{}:t,r=n.preventScroll,o=n.isActive,i=void 0===o?a:o;return i(e)?-1:(e.focus({preventScroll:r}),i(e)?-1:requestAnimationFrame((function(){e.focus({preventScroll:r})})))},e.fireBlurEvent=function(e,t){var n=d(e,"blur",t),r=e.dispatchEvent(n),o=s(s({},t),{},{bubbles:!0});return e.dispatchEvent(d(e,"focusout",o)),r},e.fireEvent=function(e,t,n){return e.dispatchEvent(u(e,t,n))},e.fireKeyboardEvent=function(e,t,n){return e.dispatchEvent(function(e,t,n){if(void 0===n&&(n={}),"function"==typeof KeyboardEvent)return new KeyboardEvent(t,n);var r=i(e).createEvent("KeyboardEvent");return r.initKeyboardEvent(t,n.bubbles,n.cancelable,y(e),n.key,n.location,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey),r}(e,t,n))},e.flatten=function e(t){for(var n,r=[],o=b(t);!(n=o()).done;){var i=n.value;Array.isArray(i)?r.push.apply(r,e(i)):r.push(i)}return r},e.getActiveElement=c,e.getAllFocusableIn=j,e.getAllTabbableIn=A,e.getClosestFocusable=function(e){for(;e&&!E(e);)e=r(e,O);return e},e.getDefaultView=y,e.getDocument=i,e.getFirstFocusableIn=function(e){return j(e)[0]||null},e.getFirstTabbableIn=function(e,t){return A(e,t)[0]||null},e.getLastTabbableIn=function(e,t){var n=A(e,t);return n[n.length-1]||null},e.getNextActiveElementOnBlur=function(e){return p?c(e.currentTarget):e.relatedTarget},e.getNextTabbableIn=function(e,t){var n=c(e),r=j(e),o=r.indexOf(n),i=r.slice(o+1);return i.find(w)||r.find(w)||(t?i[0]:null)},e.getPreviousTabbableIn=function(e,t){var n=c(e),r=j(e).reverse(),o=r.indexOf(n),i=r.slice(o+1);return i.find(w)||r.find(w)||(t?i[0]:null)},e.hasFocus=a,e.hasFocusWithin=function(e){var t=c(e);if(!t)return!1;if(o(e,t))return!0;var n=t.getAttribute("aria-activedescendant");return!!n&&(n===e.id||!!e.querySelector("#"+n))},e.isButton=function(e){if("BUTTON"===e.tagName)return!0;if("INPUT"===e.tagName){var t=e;return-1!==g.indexOf(t.type)}return!1},e.isEmpty=function(e){return Array.isArray(e)?!e.length:h(e)?!Object.keys(e).length:null==e||""===e},e.isFocusable=E,e.isInteger=function(e){return"number"==typeof e?Math.floor(e)===e:String(Math.floor(Number(e)))===e},e.isObject=h,e.isPlainObject=function(e){var t;if(!h(e))return!1;var n=Object.getPrototypeOf(e);return null==n||(null===(t=n.constructor)||void 0===t?void 0:t.toString())===Object.toString()},e.isPortalEvent=function(e){return!o(e.currentTarget,e.target)},e.isPromise=function(e){return Boolean(e&&"then"in e&&e.then)},e.isSelfTarget=function(e){return e.target===e.currentTarget},e.isTabbable=w,e.isTextField=function(e){try{var t=e instanceof HTMLInputElement&&null!==e.selectionStart,n="TEXTAREA"===e.tagName,r="true"===e.contentEditable;return t||n||r||!1}catch(e){return!1}},e.matches=n,e.omit=function(e,t){for(var n=Object.keys(e),r={},o=0;o<n.length;o+=1){var i=n[o];-1===t.indexOf(i)&&(r[i]=e[i])}return r},e.pick=function(e,t){for(var n=Object.keys(e),r={},o=0;o<n.length;o+=1){var i=n[o];t.indexOf(i)>=0&&(r[i]=e[i])}return r},e.removeIndexFromArray=m,e.removeItemFromArray=function(e,t){var n=e.indexOf(t);return m(e,n)},e.shallowEqual=function(e,t){if(e===t)return!0;if(!e)return!1;if(!t)return!1;if("object"!=typeof e)return!1;if("object"!=typeof t)return!1;var n=Object.keys(e),r=Object.keys(t),o=n.length;if(r.length!==o)return!1;for(var i=0,u=n;i<u.length;i++){var c=u[i];if(e[c]!==t[c])return!1}return!0},e.splitProps=function(e,t){for(var n={},r={},o=0,i=Object.keys(e);o<i.length;o++){var u=i[o];t.indexOf(u)>=0?n[u]=e[u]:r[u]=e[u]}return[n,r]},e.toArray=function(e){return Array.isArray(e)?e:void 0!==e?[e]:[]},e.useForkRef=function(e,n){return t.useMemo((function(){return null==e&&null==n?null:function(t){S(e,t),S(n,t)}}),[e,n])},e.useLiveRef=function(e){var n=t.useRef(e);return T((function(){n.current=e})),n},e.useSealedState=function(e){return t.useState(e)[0]},e.useUpdateEffect=function(e,n){var r=t.useRef(!1);t.useEffect((function(){if(r.current)return e();r.current=!0}),n)},Object.defineProperty(e,"__esModule",{value:!0})}));
